(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Ipns = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Ipns=(()=>{var Zl=Object.create;var Sn=Object.defineProperty;var Wl=Object.getOwnPropertyDescriptor;var Jl=Object.getOwnPropertyNames;var Xl=Object.getPrototypeOf,Ql=Object.prototype.hasOwnProperty;var ti=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fe=(t,e)=>{for(var r in e)Sn(t,r,{get:e[r],enumerable:!0})},js=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Jl(e))!Ql.call(t,o)&&o!==r&&Sn(t,o,{get:()=>e[o],enumerable:!(n=Wl(e,o))||n.enumerable});return t};var kn=(t,e,r)=>(r=t!=null?Zl(Xl(t)):{},js(e||!t||!t.__esModule?Sn(r,"default",{value:t,enumerable:!0}):r,t)),ef=t=>js(Sn({},"__esModule",{value:!0}),t);var ec=ti(Cr=>{"use strict";var Id="[object ArrayBuffer]",yt=class t{static isArrayBuffer(e){return Object.prototype.toString.call(e)===Id}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,r){if(e.constructor===r)return e;if(this.isArrayBuffer(e))return new r(e);if(this.isArrayBufferView(e))return new r(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){let n=t.toUint8Array(e),o=t.toUint8Array(r);if(n.length!==o.byteLength)return!1;for(let i=0;i<n.length;i++)if(n[i]!==o[i])return!1;return!0}static concat(...e){let r;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?r=e[0]:e[e.length-1]instanceof Function?r=e.slice(0,e.length-1):r=e;let n=0;for(let s of r)n+=s.byteLength;let o=new Uint8Array(n),i=0;for(let s of r){let a=this.toUint8Array(s);o.set(a,i),i+=a.length}return e[e.length-1]instanceof Function?this.toView(o,e[e.length-1]):o.buffer}},ts="string",Cd=/^[0-9a-f]+$/i,Td=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,Nd=/^[a-zA-Z0-9-_]+$/,Gn=class{static fromString(e){let r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return n.buffer}static toString(e){let r=yt.toUint8Array(e),n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return decodeURIComponent(escape(n))}},Pe=class{static toString(e,r=!1){let n=yt.toArrayBuffer(e),o=new DataView(n),i="";for(let s=0;s<n.byteLength;s+=2){let a=o.getUint16(s,r);i+=String.fromCharCode(a)}return i}static fromString(e,r=!1){let n=new ArrayBuffer(e.length*2),o=new DataView(n);for(let i=0;i<e.length;i++)o.setUint16(i*2,e.charCodeAt(i),r);return n}},jn=class t{static isHex(e){return typeof e===ts&&Cd.test(e)}static isBase64(e){return typeof e===ts&&Td.test(e)}static isBase64Url(e){return typeof e===ts&&Nd.test(e)}static ToString(e,r="utf8"){let n=yt.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return Pe.toString(n,!0);case"utf16":case"utf16be":return Pe.toString(n);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,r="utf8"){if(!e)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Pe.fromString(e,!0);case"utf16":case"utf16be":return Pe.fromString(e);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToBase64(e){let r=yt.toUint8Array(e);if(typeof btoa<"u"){let n=this.ToString(r,"binary");return btoa(n)}else return Buffer.from(r).toString("base64")}static FromBase64(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!t.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!t.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,r=t.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(e);case"utf8":return Gn.fromString(e);case"utf16":case"utf16be":return Pe.fromString(e);case"utf16le":case"usc2":return Pe.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(e,r=t.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(e);case"utf8":return Gn.toString(e);case"utf16":case"utf16be":return Pe.toString(e);case"utf16le":case"usc2":return Pe.toString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromBinary(e){let r=e.length,n=new Uint8Array(r);for(let o=0;o<r;o++)n[o]=e.charCodeAt(o);return n.buffer}static ToBinary(e){let r=yt.toUint8Array(e),n="";for(let o=0;o<r.length;o++)n+=String.fromCharCode(r[o]);return n}static ToHex(e){let r=yt.toUint8Array(e),n="",o=r.length;for(let i=0;i<o;i++){let s=r[i];s<16&&(n+="0"),n+=s.toString(16)}return n}static FromHex(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!t.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);let n=new Uint8Array(r.length/2);for(let o=0;o<r.length;o=o+2){let i=r.slice(o,o+2);n[o/2]=parseInt(i,16)}return n.buffer}static ToUtf16String(e,r=!1){return Pe.toString(e,r)}static FromUtf16String(e,r=!1){return Pe.fromString(e,r)}static Base64Padding(e){let r=4-e.length%4;if(r<4)for(let n=0;n<r;n++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}};jn.DEFAULT_UTF8_ENCODING="utf8";function _d(t,...e){let r=arguments[0];for(let n=1;n<arguments.length;n++){let o=arguments[n];for(let i in o)r[i]=o[i]}return r}function Ud(...t){let e=t.map(o=>o.byteLength).reduce((o,i)=>o+i),r=new Uint8Array(e),n=0;return t.map(o=>new Uint8Array(o)).forEach(o=>{for(let i of o)r[n++]=i}),r.buffer}function Ld(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;let r=new Uint8Array(t),n=new Uint8Array(e);for(let o=0;o<t.byteLength;o++)if(r[o]!==n[o])return!1;return!0}Cr.BufferSourceConverter=yt;Cr.Convert=jn;Cr.assign=_d;Cr.combine=Ud;Cr.isEqual=Ld});var ms=ti((mb,lu)=>{"use strict";function uu(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function R0(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return uu(t,r)}catch{r.message=t.message,r.stack=t.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),uu(new o,r)}}lu.exports=R0});var hu=ti((Bb,bs)=>{var Eb=function(){typeof bs<"u"&&(bs.exports=p);var t=86400,e=3200,r=146097*e/400,n=t*r,o=1e3*n,i=864e13,s=4294967296,a=1e6,c="000000000",f=Math.trunc||function(w){var E=w-w%1;return E==0&&(w<0||w===0&&1/w!=1/0)?-0:E},u=p.prototype,l=(p.fromDate=function(w){return new p(+w)},p.fromInt64BE=I(0,1,2,3,0,4),p.fromInt64LE=I(3,2,1,0,4,0),p.fromString=function(_){var E,F=new p,_=(_+="").replace(/^\s*[+\-]?\d+/,function(K){var K=+K,S=1970+(K-1970)%400;return F.year=K-S,S}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(T,K,S){return K<0&&(S*=-1),E=6e4*(60*+K+ +S),""}).replace(/\.\d+$/,function(T){return F.nano=+(T+c).substr(1,9),""}).split(/\D+/);if(1<_.length?_[1]--:_[1]=0,F.time=E=Date.UTC.apply(Date,_)-(E||0),isNaN(E))throw new TypeError("Invalid Date");return d(F)},p.fromTimeT=function(w){return R(w,0)},u.year=0,u.time=0,u.nano=0,u.addNano=function(w){return this.nano+=+w||0,this},u.getNano=function(){var w=d(this);return(w.time%1e3*a+ +w.nano+1e9)%1e9},u.getTimeT=function(){var E=d(this),w=Math.floor(E.time/1e3),E=E.year;return E&&(w+=E*r*t/e),w},u.getYear=function(){return this.toDate().getUTCFullYear()+this.year},u.toDate=function(){return x(d(this).time)},u.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},u.toString=function(w){var E=this,F=E.toDate(),_={H:function(){return V(F.getUTCHours())},L:function(){return N(F.getUTCMilliseconds(),3)},M:function(){return V(F.getUTCMinutes())},N:function(){return N(E.getNano(),9)},S:function(){return V(F.getUTCSeconds())},Y:function(){var T=E.getYear();return 999999<T?"+"+T:9999<T?"+"+N(T,6):0<=T?N(T,4):-999999<=T?"-"+N(-T,6):T},a:function(){return B[F.getUTCDay()]},b:function(){return h[F.getUTCMonth()]},d:function(){return V(F.getUTCDate())},e:function(){return function(T){return(9<T?"":" ")+(0|T)}(F.getUTCDate())},m:function(){return V(F.getUTCMonth()+1)}};return function T(K){return K.replace(/%./g,function(S){var m=S[1],k=v[m],m=_[m];return k?T(k):m?m():S})}(w||l)},u.writeInt64BE=b(0,1,2,3,0,4),u.writeInt64LE=b(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return p;function p(w,E,F){var _=this;if(!(_ instanceof p))return new p(w,E,F);_.time=+w||0,_.nano=+E||0,_.year=+F||0,d(_)}function d(w){var E,F,_,T=w.year,K=w.time,S=w.nano,k=((S<0||a<=S)&&(S-=(F=Math.floor(S/a))*a,K+=F,F=1),T%e);return(K<-i||i<K||k)&&((E=f(K/o))&&(T+=E*e,K-=E*o),(_=x(K)).setUTCFullYear(k+_.getUTCFullYear()),_=(K=+_)+(E=f((T-=k)/e))*o,E&&-i<=_&&_<=i&&(T-=E*e,K=_),F=1),F&&(w.year=T,w.time=K,w.nano=S),w}function x(w){var E=new Date(0);return E.setTime(w),E}function R(T,_){T=+T||0;var F=f((_=(_|0)*s)/n)+f(T/n),_=_%n+T%n,T=f(_/n);return T&&(F+=T,_-=T*n),new p(1e3*_,0,F*e)}function b(w,E,F,_,T,K){return function(k,m){var A=d(this);k=k||new Array(8),O(k,m|=0);var D=Math.floor(A.time/1e3),A=A.year*(r*t/e),g=f(A/s)+f(D/s),A=A%s+D%s,D=Math.floor(A/s);return D&&(g+=D,A-=D*s),S(k,m+T,g),S(k,m+K,A),k};function S(k,m,g){k[m+w]=g>>24&255,k[m+E]=g>>16&255,k[m+F]=g>>8&255,k[m+_]=255&g}}function I(w,E,F,_,T,K){return function(k,m){O(k,m|=0);var g=S(k,m+T);return R(S(k,m+K),g)};function S(k,m){return 16777216*k[m+w]+(k[m+E]<<16|k[m+F]<<8|k[m+_])}}function O(w,E){if(w=w&&w.length,w==null)throw new TypeError("Invalid Buffer");if(w<E+8)throw new RangeError("Out of range")}function V(w){return(9<w?"":"0")+(0|w)}function N(w,E){return(c+(0|w)).substr(-E)}}()});var wp={};fe(wp,{create:()=>pp,createWithExpiration:()=>gp,extractPublicKey:()=>Tl,getLocalKey:()=>mp,marshal:()=>Ul,namespace:()=>Ml,namespaceLength:()=>dp,peerIdFromRoutingKey:()=>Dl,peerIdToRoutingKey:()=>Vl,unmarshal:()=>Ll});var Rn=Symbol.for("@libp2p/peer-id");function Ys(t){return t!=null&&!!t[Rn]}var q=class extends Error{code;props;constructor(e,r,n){super(e),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var Qi={};fe(Qi,{Ed25519PrivateKey:()=>rr,Ed25519PublicKey:()=>nn,generateKeyPair:()=>Sd,generateKeyPairFromSeed:()=>Qa,unmarshalEd25519PrivateKey:()=>vd,unmarshalEd25519PublicKey:()=>Ad});var si={};fe(si,{base58btc:()=>ye,base58flickr:()=>af});var vp=new Uint8Array(0);function Zs(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function lt(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function Ws(t){return new TextEncoder().encode(t)}function Js(t){return new TextDecoder().decode(t)}function tf(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var i=t.charAt(o),s=i.charCodeAt(0);if(r[s]!==255)throw new TypeError(i+" is ambiguous");r[s]=o}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var p=0,d=0,x=0,R=v.length;x!==R&&v[x]===0;)x++,p++;for(var b=(R-x)*u+1>>>0,I=new Uint8Array(b);x!==R;){for(var O=v[x],V=0,N=b-1;(O!==0||V<d)&&N!==-1;N--,V++)O+=256*I[N]>>>0,I[N]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");d=V,x++}for(var w=b-d;w!==b&&I[w]===0;)w++;for(var E=c.repeat(p);w<b;++w)E+=t.charAt(I[w]);return E}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var p=0;if(v[p]!==" "){for(var d=0,x=0;v[p]===c;)d++,p++;for(var R=(v.length-p)*f+1>>>0,b=new Uint8Array(R);v[p];){var I=r[v.charCodeAt(p)];if(I===255)return;for(var O=0,V=R-1;(I!==0||O<x)&&V!==-1;V--,O++)I+=a*b[V]>>>0,b[V]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");x=O,p++}if(v[p]!==" "){for(var N=R-x;N!==R&&b[N]===0;)N++;for(var w=new Uint8Array(d+(R-N)),E=d;N!==R;)w[E++]=b[N++];return w}}}function B(v){var p=h(v);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:h,decode:B}}var rf=tf,nf=rf,Qs=nf;var ri=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ni=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ea(this,e)}},oi=class{decoders;constructor(e){this.decoders=e}or(e){return ea(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function ea(t,e){return new oi({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var ii=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new ri(e,r,n),this.decoder=new ni(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function cr({name:t,prefix:e,encode:r,decode:n}){return new ii(t,e,r,n)}function kt({name:t,prefix:e,alphabet:r}){let{encode:n,decode:o}=Qs(r,t);return cr({prefix:e,name:t,encode:n,decode:i=>lt(o(i))})}function of(t,e,r,n){let o={};for(let u=0;u<e.length;++u)o[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;let s=new Uint8Array(i*r/8|0),a=0,c=0,f=0;for(let u=0;u<i;++u){let l=o[t[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,s[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s}function sf(t,e,r){let n=e[e.length-1]==="=",o=(1<<r)-1,i="",s=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],s+=8;s>r;)s-=r,i+=e[o&a>>s];if(s!==0&&(i+=e[o&a<<r-s]),n)for(;i.length*r&7;)i+="=";return i}function oe({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return cr({prefix:e,name:t,encode(o){return sf(o,n,r)},decode(o){return of(o,n,r,t)}})}var ye=kt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),af=kt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ci={};fe(ci,{identity:()=>qe});var cf=na,ta=128,uf=127,lf=~uf,ff=Math.pow(2,31);function na(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ff;)e[r++]=t&255|ta,t/=128;for(;t&lf;)e[r++]=t&255|ta,t>>>=7;return e[r]=t|0,na.bytes=r-n+1,e}var hf=ai,df=128,ra=127;function ai(t,n){var r=0,n=n||0,o=0,i=n,s,a=t.length;do{if(i>=a)throw ai.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=o<28?(s&ra)<<o:(s&ra)*Math.pow(2,o),o+=7}while(s>=df);return ai.bytes=i-n,r}var pf=Math.pow(2,7),gf=Math.pow(2,14),yf=Math.pow(2,21),mf=Math.pow(2,28),bf=Math.pow(2,35),wf=Math.pow(2,42),xf=Math.pow(2,49),Ef=Math.pow(2,56),Bf=Math.pow(2,63),vf=function(t){return t<pf?1:t<gf?2:t<yf?3:t<mf?4:t<bf?5:t<wf?6:t<xf?7:t<Ef?8:t<Bf?9:10},Af={encode:cf,decode:hf,encodingLength:vf},Sf=Af,zr=Sf;function Gr(t,e=0){return[zr.decode(t,e),zr.decode.bytes]}function ur(t,e,r=0){return zr.encode(t,e,r),e}function lr(t){return zr.encodingLength(t)}function et(t,e){let r=e.byteLength,n=lr(t),o=n+lr(r),i=new Uint8Array(o+r);return ur(t,i,0),ur(r,i,n),i.set(e,o),new fr(t,r,e,i)}function zt(t){let e=lt(t),[r,n]=Gr(e),[o,i]=Gr(e.subarray(n)),s=e.subarray(n+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new fr(r,o,s,e)}function oa(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Zs(t.bytes,r.bytes)}}var fr=class{code;size;digest;bytes;constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}};var ia=0,kf="identity",sa=lt;function Rf(t){return et(ia,sa(t))}var qe={code:ia,name:kf,encode:sa,digest:Rf};var fi={};fe(fi,{sha256:()=>me,sha512:()=>If});function li({name:t,code:e,encode:r}){return new ui(t,e,r)}var ui=class{name;code;encode;constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?et(this.code,r):r.then(n=>et(this.code,n))}else throw Error("Unknown type, must be binary type")}};function ca(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}var me=li({name:"sha2-256",code:18,encode:ca("SHA-256")}),If=li({name:"sha2-512",code:19,encode:ca("SHA-512")});function be(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function tt(t=0){return new Uint8Array(t)}function jt(t,e){e==null&&(e=t.reduce((o,i)=>o+i.length,0));let r=tt(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}var hi={};fe(hi,{base10:()=>Cf});var Cf=kt({prefix:"9",name:"base10",alphabet:"0123456789"});var di={};fe(di,{base16:()=>Tf,base16upper:()=>Nf});var Tf=oe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nf=oe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var pi={};fe(pi,{base2:()=>_f});var _f=oe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var gi={};fe(gi,{base256emoji:()=>Of});var ua=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Uf=ua.reduce((t,e,r)=>(t[r]=e,t),[]),Lf=ua.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Vf(t){return t.reduce((e,r)=>(e+=Uf[r],e),"")}function Df(t){let e=[];for(let r of t){let n=Lf[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var Of=cr({prefix:"\u{1F680}",name:"base256emoji",encode:Vf,decode:Df});var mi={};fe(mi,{base32:()=>Rt,base32hex:()=>Hf,base32hexpad:()=>Kf,base32hexpadupper:()=>$f,base32hexupper:()=>Pf,base32pad:()=>Ff,base32padupper:()=>Mf,base32upper:()=>yi,base32z:()=>qf});var Rt=oe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yi=oe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ff=oe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Mf=oe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Hf=oe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Pf=oe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Kf=oe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$f=oe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qf=oe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var bi={};fe(bi,{base36:()=>Cn,base36upper:()=>zf});var Cn=kt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),zf=kt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wi={};fe(wi,{base64:()=>jr,base64pad:()=>Gf,base64url:()=>jf,base64urlpad:()=>Yf});var jr=oe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Gf=oe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),jf=oe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Yf=oe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var xi={};fe(xi,{base8:()=>Zf});var Zf=oe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ei={};fe(Ei,{identity:()=>Wf});var Wf=cr({prefix:"\0",name:"identity",encode:t=>Js(t),decode:t=>Ws(t)});var Jp=new TextEncoder,Xp=new TextDecoder;function la(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return eh(r,Bi(t),e??ye.encoder);default:return th(r,Bi(t),e??Rt.encoder)}}var fa=new WeakMap;function Bi(t){let e=fa.get(t);if(e==null){let r=new Map;return fa.set(t,r),r}return e}var Me=class t{code;version;multihash;bytes;"/";constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Yr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==rh)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=et(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&oa(e.multihash,n.multihash)}toString(e){return la(this,e)}toJSON(){return{"/":la(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:i,bytes:s}=r;return new t(n,o,i,s??ha(n,o,i.bytes))}else if(r[nh]===!0){let{version:n,multihash:o,code:i}=r,s=zt(o);return t.create(n,i,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Yr)throw new Error(`Version 0 CID must use dag-pb (code: ${Yr}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let o=ha(e,r,n.bytes);return new t(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Yr,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,o=lt(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=o.subarray(r.multihashSize-r.digestSize),s=new fr(r.multihashCode,r.digestSize,i,o);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,h]=Gr(e.subarray(r));return r+=h,l},o=n(),i=Yr;if(o===18?(o=0,r=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let s=r,a=n(),c=n(),f=r+c,u=f-s;return{version:o,codec:i,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,r){let[n,o]=Qf(e,r),i=t.decode(o);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Bi(i).set(n,e),i}};function Qf(t,e){switch(t[0]){case"Q":{let r=e??ye;return[ye.prefix,r.decode(`${ye.prefix}${t}`)]}case ye.prefix:{let r=e??ye;return[ye.prefix,r.decode(t)]}case Rt.prefix:{let r=e??Rt;return[Rt.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function eh(t,e,r){let{prefix:n}=r;if(n!==ye.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=e.get(n);if(o==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return o}function th(t,e,r){let{prefix:n}=r,o=e.get(n);if(o==null){let i=r.encode(t);return e.set(n,i),i}else return o}var Yr=112,rh=18;function ha(t,e,r){let n=lr(t),o=n+lr(e),i=new Uint8Array(o+r.byteLength);return ur(t,i,0),ur(e,i,n),i.set(r,o),i}var nh=Symbol.for("@ipld/js-cid/CID");var hr={...Ei,...pi,...xi,...hi,...di,...mi,...bi,...si,...wi,...gi},pg={...fi,...ci};function pa(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var da=pa("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),vi=pa("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=tt(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),oh={utf8:da,"utf-8":da,hex:hr.base16,latin1:vi,ascii:vi,binary:vi,...hr},Tn=oh;function Z(t,e="utf8"){let r=Tn[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function He(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}function dr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function ih(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function pr(t,...e){if(!ih(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Nn(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");dr(t.outputLen),dr(t.blockLen)}function gr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ga(t,e){pr(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Yt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var mr=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ze=(t,e)=>t<<32-e|t>>>e;var Ig=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;var sh=async()=>{};async function ya(t,e,r){let n=Date.now();for(let o=0;o<t;o++){r(o);let i=Date.now()-n;i>=0&&i<e||(await sh(),n+=i)}}function ma(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function It(t){return typeof t=="string"&&(t=ma(t)),pr(t),t}function Ai(...t){let e=0;for(let n=0;n<t.length;n++){let o=t[n];pr(o),e+=o.length}let r=new Uint8Array(e);for(let n=0,o=0;n<t.length;n++){let i=t[n];r.set(i,o),o+=i.length}return r}var yr=class{clone(){return this._cloneInto()}},ah={}.toString;function ba(t,e){if(e!==void 0&&ah.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function _n(t){let e=n=>t().update(It(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function br(t=32){if(Yt&&typeof Yt.getRandomValues=="function")return Yt.getRandomValues(new Uint8Array(t));if(Yt&&typeof Yt.randomBytes=="function")return Yt.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function ch(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),a=Number(r&i),c=n?4:0,f=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+f,a,n)}var wa=(t,e,r)=>t&e^~t&r,xa=(t,e,r)=>t&e^t&r^e&r,wr=class extends yr{constructor(e,r,n,o){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=mr(this.buffer)}update(e){gr(this);let{view:r,buffer:n,blockLen:o}=this;e=It(e);let i=e.length;for(let s=0;s<i;){let a=Math.min(o-this.pos,i-s);if(a===o){let c=mr(e);for(;o<=i-s;s+=o)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gr(this),ga(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:i}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(n,0),s=0);for(let l=s;l<o;l++)r[l]=0;ch(n,o-8,BigInt(this.length*8),i),this.process(n,0);let a=mr(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)a.setUint32(4*l,u[l],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:i,destroyed:s,pos:a}=this;return e.length=o,e.pos=a,e.finished=i,e.destroyed=s,o%r&&e.buffer.set(n),e}};var Un=BigInt(4294967295),Si=BigInt(32);function Ea(t,e=!1){return e?{h:Number(t&Un),l:Number(t>>Si&Un)}:{h:Number(t>>Si&Un)|0,l:Number(t&Un)|0}}function uh(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let o=0;o<t.length;o++){let{h:i,l:s}=Ea(t[o],e);[r[o],n[o]]=[i,s]}return[r,n]}var lh=(t,e)=>BigInt(t>>>0)<<Si|BigInt(e>>>0),fh=(t,e,r)=>t>>>r,hh=(t,e,r)=>t<<32-r|e>>>r,dh=(t,e,r)=>t>>>r|e<<32-r,ph=(t,e,r)=>t<<32-r|e>>>r,gh=(t,e,r)=>t<<64-r|e>>>r-32,yh=(t,e,r)=>t>>>r-32|e<<64-r,mh=(t,e)=>e,bh=(t,e)=>t,wh=(t,e,r)=>t<<r|e>>>32-r,xh=(t,e,r)=>e<<r|t>>>32-r,Eh=(t,e,r)=>e<<r-32|t>>>64-r,Bh=(t,e,r)=>t<<r-32|e>>>64-r;function vh(t,e,r,n){let o=(e>>>0)+(n>>>0);return{h:t+r+(o/2**32|0)|0,l:o|0}}var Ah=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Sh=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,kh=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Rh=(t,e,r,n,o)=>e+r+n+o+(t/2**32|0)|0,Ih=(t,e,r,n,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(o>>>0),Ch=(t,e,r,n,o,i)=>e+r+n+o+i+(t/2**32|0)|0;var Th={fromBig:Ea,split:uh,toBig:lh,shrSH:fh,shrSL:hh,rotrSH:dh,rotrSL:ph,rotrBH:gh,rotrBL:yh,rotr32H:mh,rotr32L:bh,rotlSH:wh,rotlSL:xh,rotlBH:Eh,rotlBL:Bh,add:vh,add3L:Ah,add3H:Sh,add4L:kh,add4H:Rh,add5H:Ch,add5L:Ih},$=Th;var[Nh,_h]=$.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ct=new Uint32Array(80),Tt=new Uint32Array(80),ki=class extends wr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:o,Ch:i,Cl:s,Dh:a,Dl:c,Eh:f,El:u,Fh:l,Fl:h,Gh:B,Gl:v,Hh:p,Hl:d}=this;return[e,r,n,o,i,s,a,c,f,u,l,h,B,v,p,d]}set(e,r,n,o,i,s,a,c,f,u,l,h,B,v,p,d){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=i|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=u|0,this.Fh=l|0,this.Fl=h|0,this.Gh=B|0,this.Gl=v|0,this.Hh=p|0,this.Hl=d|0}process(e,r){for(let b=0;b<16;b++,r+=4)Ct[b]=e.getUint32(r),Tt[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){let I=Ct[b-15]|0,O=Tt[b-15]|0,V=$.rotrSH(I,O,1)^$.rotrSH(I,O,8)^$.shrSH(I,O,7),N=$.rotrSL(I,O,1)^$.rotrSL(I,O,8)^$.shrSL(I,O,7),w=Ct[b-2]|0,E=Tt[b-2]|0,F=$.rotrSH(w,E,19)^$.rotrBH(w,E,61)^$.shrSH(w,E,6),_=$.rotrSL(w,E,19)^$.rotrBL(w,E,61)^$.shrSL(w,E,6),T=$.add4L(N,_,Tt[b-7],Tt[b-16]),K=$.add4H(T,V,F,Ct[b-7],Ct[b-16]);Ct[b]=K|0,Tt[b]=T|0}let{Ah:n,Al:o,Bh:i,Bl:s,Ch:a,Cl:c,Dh:f,Dl:u,Eh:l,El:h,Fh:B,Fl:v,Gh:p,Gl:d,Hh:x,Hl:R}=this;for(let b=0;b<80;b++){let I=$.rotrSH(l,h,14)^$.rotrSH(l,h,18)^$.rotrBH(l,h,41),O=$.rotrSL(l,h,14)^$.rotrSL(l,h,18)^$.rotrBL(l,h,41),V=l&B^~l&p,N=h&v^~h&d,w=$.add5L(R,O,N,_h[b],Tt[b]),E=$.add5H(w,x,I,V,Nh[b],Ct[b]),F=w|0,_=$.rotrSH(n,o,28)^$.rotrBH(n,o,34)^$.rotrBH(n,o,39),T=$.rotrSL(n,o,28)^$.rotrBL(n,o,34)^$.rotrBL(n,o,39),K=n&i^n&a^i&a,S=o&s^o&c^s&c;x=p|0,R=d|0,p=B|0,d=v|0,B=l|0,v=h|0,{h:l,l:h}=$.add(f|0,u|0,E|0,F|0),f=a|0,u=c|0,a=i|0,c=s|0,i=n|0,s=o|0;let k=$.add3L(F,T,S);n=$.add3H(k,E,_,K),o=k|0}({h:n,l:o}=$.add(this.Ah|0,this.Al|0,n|0,o|0)),{h:i,l:s}=$.add(this.Bh|0,this.Bl|0,i|0,s|0),{h:a,l:c}=$.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:u}=$.add(this.Dh|0,this.Dl|0,f|0,u|0),{h:l,l:h}=$.add(this.Eh|0,this.El|0,l|0,h|0),{h:B,l:v}=$.add(this.Fh|0,this.Fl|0,B|0,v|0),{h:p,l:d}=$.add(this.Gh|0,this.Gl|0,p|0,d|0),{h:x,l:R}=$.add(this.Hh|0,this.Hl|0,x|0,R|0),this.set(n,o,i,s,a,c,f,u,l,h,B,v,p,d,x,R)}roundClean(){Ct.fill(0),Tt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Zr=_n(()=>new ki);var Vn={};fe(Vn,{aInRange:()=>Ie,abool:()=>Ge,abytes:()=>xr,bitGet:()=>Fh,bitLen:()=>Ni,bitMask:()=>Jr,bitSet:()=>Mh,bytesToHex:()=>ht,bytesToNumberBE:()=>dt,bytesToNumberLE:()=>_t,concatBytes:()=>pt,createHmacDrbg:()=>_i,ensureBytes:()=>ie,equalBytes:()=>Dh,hexToBytes:()=>Wt,hexToNumber:()=>Ti,inRange:()=>Wr,isBytes:()=>Nt,memoized:()=>Xt,notImplemented:()=>Ph,numberToBytesBE:()=>Ut,numberToBytesLE:()=>Jt,numberToHexUnpadded:()=>Zt,numberToVarBytesBE:()=>Vh,utf8ToBytes:()=>Oh,validateObject:()=>rt});var Ci=BigInt(0),Ln=BigInt(1),Uh=BigInt(2);function Nt(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function xr(t){if(!Nt(t))throw new Error("Uint8Array expected")}function Ge(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)}var Lh=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ht(t){xr(t);let e="";for(let r=0;r<t.length;r++)e+=Lh[t[r]];return e}function Zt(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Ti(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var ft={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ba(t){if(t>=ft._0&&t<=ft._9)return t-ft._0;if(t>=ft._A&&t<=ft._F)return t-(ft._A-10);if(t>=ft._a&&t<=ft._f)return t-(ft._a-10)}function Wt(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){let s=Ba(t.charCodeAt(i)),a=Ba(t.charCodeAt(i+1));if(s===void 0||a===void 0){let c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[o]=s*16+a}return n}function dt(t){return Ti(ht(t))}function _t(t){return xr(t),Ti(ht(Uint8Array.from(t).reverse()))}function Ut(t,e){return Wt(t.toString(16).padStart(e*2,"0"))}function Jt(t,e){return Ut(t,e).reverse()}function Vh(t){return Wt(Zt(t))}function ie(t,e,r){let n;if(typeof e=="string")try{n=Wt(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Nt(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(`${t} expected ${r} bytes, got ${o}`);return n}function pt(...t){let e=0;for(let n=0;n<t.length;n++){let o=t[n];xr(o),e+=o.length}let r=new Uint8Array(e);for(let n=0,o=0;n<t.length;n++){let i=t[n];r.set(i,o),o+=i.length}return r}function Dh(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Oh(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}var Ri=t=>typeof t=="bigint"&&Ci<=t;function Wr(t,e,r){return Ri(t)&&Ri(e)&&Ri(r)&&e<=t&&t<r}function Ie(t,e,r,n){if(!Wr(e,r,n))throw new Error(`expected valid ${t}: ${r} <= n < ${n}, got ${typeof e} ${e}`)}function Ni(t){let e;for(e=0;t>Ci;t>>=Ln,e+=1);return e}function Fh(t,e){return t>>BigInt(e)&Ln}function Mh(t,e,r){return t|(r?Ln:Ci)<<BigInt(e)}var Jr=t=>(Uh<<BigInt(t-1))-Ln,Ii=t=>new Uint8Array(t),va=t=>Uint8Array.from(t);function _i(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Ii(t),o=Ii(t),i=0,s=()=>{n.fill(1),o.fill(0),i=0},a=(...l)=>r(o,n,...l),c=(l=Ii())=>{o=a(va([0]),l),n=a(),l.length!==0&&(o=a(va([1]),l),n=a())},f=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,h=[];for(;l<e;){n=a();let B=n.slice();h.push(B),l+=n.length}return pt(...h)};return(l,h)=>{s(),c(l);let B;for(;!(B=h(f()));)c();return s(),B}}var Hh={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Nt(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function rt(t,e,r={}){let n=(o,i,s)=>{let a=Hh[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=t[o];if(!(s&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${i}`)};for(let[o,i]of Object.entries(e))n(o,i,!1);for(let[o,i]of Object.entries(r))n(o,i,!0);return t}var Ph=()=>{throw new Error("not implemented")};function Xt(t){let e=new WeakMap;return(r,...n)=>{let o=e.get(r);if(o!==void 0)return o;let i=t(r,...n);return e.set(r,i),i}}var ce=BigInt(0),ee=BigInt(1),Qt=BigInt(2),Kh=BigInt(3),Ui=BigInt(4),Aa=BigInt(5),Sa=BigInt(8),$h=BigInt(9),qh=BigInt(16);function X(t,e){let r=t%e;return r>=ce?r:e+r}function zh(t,e,r){if(r<=ce||e<ce)throw new Error("Expected power/modulo > 0");if(r===ee)return ce;let n=ee;for(;e>ce;)e&ee&&(n=n*t%r),t=t*t%r,e>>=ee;return n}function te(t,e,r){let n=t;for(;e-- >ce;)n*=n,n%=r;return n}function Dn(t,e){if(t===ce||e<=ce)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=X(t,e),n=e,o=ce,i=ee,s=ee,a=ce;for(;r!==ce;){let f=n/r,u=n%r,l=o-s*f,h=i-a*f;n=r,r=u,o=s,i=a,s=l,a=h}if(n!==ee)throw new Error("invert: does not exist");return X(o,e)}function Gh(t){let e=(t-ee)/Qt,r,n,o;for(r=t-ee,n=0;r%Qt===ce;r/=Qt,n++);for(o=Qt;o<t&&zh(o,e,t)!==t-ee;o++);if(n===1){let s=(t+ee)/Ui;return function(c,f){let u=c.pow(f,s);if(!c.eql(c.sqr(u),f))throw new Error("Cannot find square root");return u}}let i=(r+ee)/Qt;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,u=a.pow(a.mul(a.ONE,o),r),l=a.pow(c,i),h=a.pow(c,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let B=1;for(let p=a.sqr(h);B<f&&!a.eql(p,a.ONE);B++)p=a.sqr(p);let v=a.pow(u,ee<<BigInt(f-B-1));u=a.sqr(v),l=a.mul(l,v),h=a.mul(h,u),f=B}return l}}function jh(t){if(t%Ui===Kh){let e=(t+ee)/Ui;return function(n,o){let i=n.pow(o,e);if(!n.eql(n.sqr(i),o))throw new Error("Cannot find square root");return i}}if(t%Sa===Aa){let e=(t-Aa)/Sa;return function(n,o){let i=n.mul(o,Qt),s=n.pow(i,e),a=n.mul(o,s),c=n.mul(n.mul(a,Qt),s),f=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(f),o))throw new Error("Cannot find square root");return f}}return t%qh,Gh(t)}var ka=(t,e)=>(X(t,e)&ee)===ee,Yh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Li(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Yh.reduce((n,o)=>(n[o]="function",n),e);return rt(t,r)}function Zh(t,e,r){if(r<ce)throw new Error("Expected power > 0");if(r===ce)return t.ONE;if(r===ee)return e;let n=t.ONE,o=e;for(;r>ce;)r&ee&&(n=t.mul(n,o)),o=t.sqr(o),r>>=ee;return n}function Wh(t,e){let r=new Array(e.length),n=e.reduce((i,s,a)=>t.is0(s)?i:(r[a]=i,t.mul(i,s)),t.ONE),o=t.inv(n);return e.reduceRight((i,s,a)=>t.is0(s)?i:(r[a]=t.mul(i,r[a]),t.mul(i,s)),o),r}function Vi(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Lt(t,e,r=!1,n={}){if(t<=ce)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:o,nByteLength:i}=Vi(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=jh(t),a=Object.freeze({ORDER:t,BITS:o,BYTES:i,MASK:Jr(o),ZERO:ce,ONE:ee,create:c=>X(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return ce<=c&&c<t},is0:c=>c===ce,isOdd:c=>(c&ee)===ee,neg:c=>X(-c,t),eql:(c,f)=>c===f,sqr:c=>X(c*c,t),add:(c,f)=>X(c+f,t),sub:(c,f)=>X(c-f,t),mul:(c,f)=>X(c*f,t),pow:(c,f)=>Zh(a,c,f),div:(c,f)=>X(c*Dn(f,t),t),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>Dn(c,t),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>Wh(a,c),cmov:(c,f,u)=>u?f:c,toBytes:c=>r?Jt(c,i):Ut(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return r?_t(c):dt(c)}});return Object.freeze(a)}function Ra(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function Di(t){let e=Ra(t);return e+Math.ceil(e/2)}function Ia(t,e,r=!1){let n=t.length,o=Ra(e),i=Di(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let s=r?dt(t):_t(t),a=X(s,e-ee)+ee;return r?Jt(a,o):Ut(a,o)}var Xh=BigInt(0),Oi=BigInt(1),Fi=new WeakMap,Ca=new WeakMap;function On(t,e){let r=(i,s)=>{let a=s.negate();return i?a:s},n=i=>{if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error(`Wrong window size=${i}, should be [1..${e}]`)},o=i=>{n(i);let s=Math.ceil(e/i)+1,a=2**(i-1);return{windows:s,windowSize:a}};return{constTimeNegate:r,unsafeLadder(i,s){let a=t.ZERO,c=i;for(;s>Xh;)s&Oi&&(a=a.add(c)),c=c.double(),s>>=Oi;return a},precomputeWindow(i,s){let{windows:a,windowSize:c}=o(s),f=[],u=i,l=u;for(let h=0;h<a;h++){l=u,f.push(l);for(let B=1;B<c;B++)l=l.add(u),f.push(l);u=l.double()}return f},wNAF(i,s,a){let{windows:c,windowSize:f}=o(i),u=t.ZERO,l=t.BASE,h=BigInt(2**i-1),B=2**i,v=BigInt(i);for(let p=0;p<c;p++){let d=p*f,x=Number(a&h);a>>=v,x>f&&(x-=B,a+=Oi);let R=d,b=d+Math.abs(x)-1,I=p%2!==0,O=x<0;x===0?l=l.add(r(I,s[R])):u=u.add(r(O,s[b]))}return{p:u,f:l}},wNAFCached(i,s,a){let c=Ca.get(i)||1,f=Fi.get(i);return f||(f=this.precomputeWindow(i,c),c!==1&&Fi.set(i,a(f))),this.wNAF(c,f,s)},setWindowSize(i,s){n(s),Ca.set(i,s),Fi.delete(i)}}}function Fn(t,e,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((u,l)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${l}`)}),r.forEach((u,l)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${l}`)});let o=Ni(BigInt(r.length)),i=o>12?o-3:o>4?o-2:o?2:1,s=(1<<i)-1,a=new Array(s+1).fill(t.ZERO),c=Math.floor((e.BITS-1)/i)*i,f=t.ZERO;for(let u=c;u>=0;u-=i){a.fill(t.ZERO);for(let h=0;h<n.length;h++){let B=n[h],v=Number(B>>BigInt(u)&BigInt(s));a[v]=a[v].add(r[h])}let l=t.ZERO;for(let h=a.length-1,B=t.ZERO;h>0;h--)B=B.add(a[h]),l=l.add(B);if(f=f.add(l),u!==0)for(let h=0;h<i;h++)f=f.double()}return f}function Xr(t){return Li(t.Fp),rt(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Vi(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}var je=BigInt(0),Ce=BigInt(1),Mn=BigInt(2),Qh=BigInt(8),ed={zip215:!0};function td(t){let e=Xr(t);return rt(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Ta(t){let e=td(t),{Fp:r,n,prehash:o,hash:i,randomBytes:s,nByteLength:a,h:c}=e,f=Mn<<BigInt(a*8)-Ce,u=r.create,l=Lt(e.n,e.nBitLength),h=e.uvRatio||((m,g)=>{try{return{isValid:!0,value:r.sqrt(m*r.inv(g))}}catch{return{isValid:!1,value:je}}}),B=e.adjustScalarBytes||(m=>m),v=e.domain||((m,g,A)=>{if(Ge("phflag",A),g.length||A)throw new Error("Contexts/pre-hash are not supported");return m});function p(m,g){Ie("coordinate "+m,g,je,f)}function d(m){if(!(m instanceof b))throw new Error("ExtendedPoint expected")}let x=Xt((m,g)=>{let{ex:A,ey:D,ez:M}=m,H=m.is0();g==null&&(g=H?Qh:r.inv(M));let z=u(A*g),Y=u(D*g),G=u(M*g);if(H)return{x:je,y:Ce};if(G!==Ce)throw new Error("invZ was invalid");return{x:z,y:Y}}),R=Xt(m=>{let{a:g,d:A}=e;if(m.is0())throw new Error("bad point: ZERO");let{ex:D,ey:M,ez:H,et:z}=m,Y=u(D*D),G=u(M*M),J=u(H*H),Q=u(J*J),ue=u(Y*g),le=u(J*u(ue+G)),ge=u(Q+u(A*u(Y*G)));if(le!==ge)throw new Error("bad point: equation left != right (1)");let ve=u(D*M),ae=u(H*z);if(ve!==ae)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(g,A,D,M){this.ex=g,this.ey=A,this.ez=D,this.et=M,p("x",g),p("y",A),p("z",D),p("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(g){if(g instanceof b)throw new Error("extended point not allowed");let{x:A,y:D}=g||{};return p("x",A),p("y",D),new b(A,D,Ce,u(A*D))}static normalizeZ(g){let A=r.invertBatch(g.map(D=>D.ez));return g.map((D,M)=>D.toAffine(A[M])).map(b.fromAffine)}static msm(g,A){return Fn(b,l,g,A)}_setWindowSize(g){V.setWindowSize(this,g)}assertValidity(){R(this)}equals(g){d(g);let{ex:A,ey:D,ez:M}=this,{ex:H,ey:z,ez:Y}=g,G=u(A*Y),J=u(H*M),Q=u(D*Y),ue=u(z*M);return G===J&&Q===ue}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:g}=e,{ex:A,ey:D,ez:M}=this,H=u(A*A),z=u(D*D),Y=u(Mn*u(M*M)),G=u(g*H),J=A+D,Q=u(u(J*J)-H-z),ue=G+z,le=ue-Y,ge=G-z,ve=u(Q*le),ae=u(ue*ge),Re=u(Q*ge),ut=u(le*ue);return new b(ve,ae,ut,Re)}add(g){d(g);let{a:A,d:D}=e,{ex:M,ey:H,ez:z,et:Y}=this,{ex:G,ey:J,ez:Q,et:ue}=g;if(A===BigInt(-1)){let Hs=u((H-M)*(J+G)),Ps=u((H+M)*(J-G)),ei=u(Ps-Hs);if(ei===je)return this.double();let Ks=u(z*Mn*ue),$s=u(Y*Mn*Q),qs=$s+Ks,zs=Ps+Hs,Gs=$s-Ks,zl=u(qs*ei),Gl=u(zs*Gs),jl=u(qs*Gs),Yl=u(ei*zs);return new b(zl,Gl,Yl,jl)}let le=u(M*G),ge=u(H*J),ve=u(Y*D*ue),ae=u(z*Q),Re=u((M+H)*(G+J)-le-ge),ut=ae-ve,$r=ae+ve,qr=u(ge-A*le),Pl=u(Re*ut),Kl=u($r*qr),$l=u(Re*qr),ql=u(ut*$r);return new b(Pl,Kl,ql,$l)}subtract(g){return this.add(g.negate())}wNAF(g){return V.wNAFCached(this,g,b.normalizeZ)}multiply(g){let A=g;Ie("scalar",A,Ce,n);let{p:D,f:M}=this.wNAF(A);return b.normalizeZ([D,M])[0]}multiplyUnsafe(g){let A=g;return Ie("scalar",A,je,n),A===je?O:this.equals(O)||A===Ce?this:this.equals(I)?this.wNAF(A).p:V.unsafeLadder(this,A)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return V.unsafeLadder(this,n).is0()}toAffine(g){return x(this,g)}clearCofactor(){let{h:g}=e;return g===Ce?this:this.multiplyUnsafe(g)}static fromHex(g,A=!1){let{d:D,a:M}=e,H=r.BYTES;g=ie("pointHex",g,H),Ge("zip215",A);let z=g.slice(),Y=g[H-1];z[H-1]=Y&-129;let G=_t(z),J=A?f:r.ORDER;Ie("pointHex.y",G,je,J);let Q=u(G*G),ue=u(Q-Ce),le=u(D*Q-M),{isValid:ge,value:ve}=h(ue,le);if(!ge)throw new Error("Point.fromHex: invalid y coordinate");let ae=(ve&Ce)===Ce,Re=(Y&128)!==0;if(!A&&ve===je&&Re)throw new Error("Point.fromHex: x=0 and x_0=1");return Re!==ae&&(ve=u(-ve)),b.fromAffine({x:ve,y:G})}static fromPrivateKey(g){return E(g).point}toRawBytes(){let{x:g,y:A}=this.toAffine(),D=Jt(A,r.BYTES);return D[D.length-1]|=g&Ce?128:0,D}toHex(){return ht(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,Ce,u(e.Gx*e.Gy)),b.ZERO=new b(je,Ce,Ce,je);let{BASE:I,ZERO:O}=b,V=On(b,a*8);function N(m){return X(m,n)}function w(m){return N(_t(m))}function E(m){let g=a;m=ie("private key",m,g);let A=ie("hashed private key",i(m),2*g),D=B(A.slice(0,g)),M=A.slice(g,2*g),H=w(D),z=I.multiply(H),Y=z.toRawBytes();return{head:D,prefix:M,scalar:H,point:z,pointBytes:Y}}function F(m){return E(m).pointBytes}function _(m=new Uint8Array,...g){let A=pt(...g);return w(i(v(A,ie("context",m),!!o)))}function T(m,g,A={}){m=ie("message",m),o&&(m=o(m));let{prefix:D,scalar:M,pointBytes:H}=E(g),z=_(A.context,D,m),Y=I.multiply(z).toRawBytes(),G=_(A.context,Y,H,m),J=N(z+G*M);Ie("signature.s",J,je,n);let Q=pt(Y,Jt(J,r.BYTES));return ie("result",Q,a*2)}let K=ed;function S(m,g,A,D=K){let{context:M,zip215:H}=D,z=r.BYTES;m=ie("signature",m,2*z),g=ie("message",g),H!==void 0&&Ge("zip215",H),o&&(g=o(g));let Y=_t(m.slice(z,2*z)),G,J,Q;try{G=b.fromHex(A,H),J=b.fromHex(m.slice(0,z),H),Q=I.multiplyUnsafe(Y)}catch{return!1}if(!H&&G.isSmallOrder())return!1;let ue=_(M,J.toRawBytes(),G.toRawBytes(),g);return J.add(G.multiplyUnsafe(ue)).subtract(Q).clearCofactor().equals(b.ZERO)}return I._setWindowSize(8),{CURVE:e,getPublicKey:F,sign:T,verify:S,ExtendedPoint:b,utils:{getExtendedPublicKey:E,randomPrivateKey:()=>s(r.BYTES),precompute(m=8,g=b.BASE){return g._setWindowSize(m),g.multiply(BigInt(3)),g}}}}var Mi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Na=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Jg=BigInt(0),rd=BigInt(1),_a=BigInt(2),Xg=BigInt(3),nd=BigInt(5),od=BigInt(8);function id(t){let e=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),i=Mi,a=t*t%i*t%i,c=te(a,_a,i)*a%i,f=te(c,rd,i)*t%i,u=te(f,nd,i)*f%i,l=te(u,e,i)*u%i,h=te(l,r,i)*l%i,B=te(h,n,i)*h%i,v=te(B,o,i)*B%i,p=te(v,o,i)*B%i,d=te(p,e,i)*u%i;return{pow_p_5_8:te(d,_a,i)*t%i,b2:a}}function sd(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ad(t,e){let r=Mi,n=X(e*e*e,r),o=X(n*n*e,r),i=id(t*o).pow_p_5_8,s=X(t*n*i,r),a=X(e*s*s,r),c=s,f=X(s*Na,r),u=a===t,l=a===X(-t,r),h=a===X(-t*Na,r);return u&&(s=c),(l||h)&&(s=f),ka(s,r)&&(s=X(-s,r)),{isValid:u||l,value:s}}var cd=Lt(Mi,void 0,!0),ud={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:cd,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:od,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Zr,randomBytes:br,adjustScalarBytes:sd,uvRatio:ad},Er=Ta(ud);var Br=32,gt=64,Hn=32;function Ua(){let t=Er.utils.randomPrivateKey(),e=Er.getPublicKey(t);return{privateKey:Oa(t,e),publicKey:e}}function La(t){if(t.length!==Hn)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=Er.getPublicKey(e);return{privateKey:Oa(e,r),publicKey:r}}function Va(t,e){let r=t.subarray(0,Hn);return Er.sign(e instanceof Uint8Array?e:e.subarray(),r)}function Da(t,e,r){return Er.verify(e,r instanceof Uint8Array?r:r.subarray(),t)}function Oa(t,e){let r=new Uint8Array(gt);for(let n=0;n<Hn;n++)r[n]=t[n],r[Hn+n]=e[n];return r}var Ae={get(t=globalThis){let e=t.crypto;if(e?.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};var Hi={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function Fa(t){let e=t?.algorithm??"AES-GCM",r=t?.keyLength??16,n=t?.nonceLength??12,o=t?.digest??"SHA-256",i=t?.saltLength??16,s=t?.iterations??32767,a=Ae.get();r*=8;async function c(l,h){let B=a.getRandomValues(new Uint8Array(i)),v=a.getRandomValues(new Uint8Array(n)),p={name:e,iv:v};typeof h=="string"&&(h=Z(h));let d;if(h.length===0){d=await a.subtle.importKey("jwk",Hi,{name:"AES-GCM"},!0,["encrypt"]);try{let R={name:"PBKDF2",salt:B,iterations:s,hash:{name:o}},b=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(R,b,{name:e,length:r},!0,["encrypt"])}catch{d=await a.subtle.importKey("jwk",Hi,{name:"AES-GCM"},!0,["encrypt"])}}else{let R={name:"PBKDF2",salt:B,iterations:s,hash:{name:o}},b=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);d=await a.subtle.deriveKey(R,b,{name:e,length:r},!0,["encrypt"])}let x=await a.subtle.encrypt(p,d,l);return jt([B,p.iv,new Uint8Array(x)])}async function f(l,h){let B=l.subarray(0,i),v=l.subarray(i,i+n),p=l.subarray(i+n),d={name:e,iv:v};typeof h=="string"&&(h=Z(h));let x;if(h.length===0)try{let b={name:"PBKDF2",salt:B,iterations:s,hash:{name:o}},I=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(b,I,{name:e,length:r},!0,["decrypt"])}catch{x=await a.subtle.importKey("jwk",Hi,{name:"AES-GCM"},!0,["decrypt"])}else{let b={name:"PBKDF2",salt:B,iterations:s,hash:{name:o}},I=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(b,I,{name:e,length:r},!0,["decrypt"])}let R=await a.subtle.decrypt(d,x,p);return new Uint8Array(R)}return{encrypt:c,decrypt:f}}async function vr(t,e){let n=await Fa().encrypt(t,e);return jr.encode(n)}var hd=Math.pow(2,7),dd=Math.pow(2,14),pd=Math.pow(2,21),Ma=Math.pow(2,28),Ha=Math.pow(2,35),Pa=Math.pow(2,42),Ka=Math.pow(2,49),Se=128,Vt=127;function Qr(t){if(t<hd)return 1;if(t<dd)return 2;if(t<pd)return 3;if(t<Ma)return 4;if(t<Ha)return 5;if(t<Pa)return 6;if(t<Ka)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function $a(t,e,r=0){switch(Qr(t)){case 8:e[r++]=t&255|Se,t/=128;case 7:e[r++]=t&255|Se,t/=128;case 6:e[r++]=t&255|Se,t/=128;case 5:e[r++]=t&255|Se,t/=128;case 4:e[r++]=t&255|Se,t>>>=7;case 3:e[r++]=t&255|Se,t>>>=7;case 2:e[r++]=t&255|Se,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function qa(t,e){let r=t[e],n=0;if(n+=r&Vt,r<Se||(r=t[e+1],n+=(r&Vt)<<7,r<Se)||(r=t[e+2],n+=(r&Vt)<<14,r<Se)||(r=t[e+3],n+=(r&Vt)<<21,r<Se)||(r=t[e+4],n+=(r&Vt)*Ma,r<Se)||(r=t[e+5],n+=(r&Vt)*Ha,r<Se)||(r=t[e+6],n+=(r&Vt)*Pa,r<Se)||(r=t[e+7],n+=(r&Vt)*Ka,r<Se))return n;throw new RangeError("Could not decode varint")}var Pi=new Float32Array([-0]),Dt=new Uint8Array(Pi.buffer);function za(t,e,r){Pi[0]=t,e[r]=Dt[0],e[r+1]=Dt[1],e[r+2]=Dt[2],e[r+3]=Dt[3]}function Ga(t,e){return Dt[0]=t[e],Dt[1]=t[e+1],Dt[2]=t[e+2],Dt[3]=t[e+3],Pi[0]}var Ki=new Float64Array([-0]),Ee=new Uint8Array(Ki.buffer);function ja(t,e,r){Ki[0]=t,e[r]=Ee[0],e[r+1]=Ee[1],e[r+2]=Ee[2],e[r+3]=Ee[3],e[r+4]=Ee[4],e[r+5]=Ee[5],e[r+6]=Ee[6],e[r+7]=Ee[7]}function Ya(t,e){return Ee[0]=t[e],Ee[1]=t[e+1],Ee[2]=t[e+2],Ee[3]=t[e+3],Ee[4]=t[e+4],Ee[5]=t[e+5],Ee[6]=t[e+6],Ee[7]=t[e+7],Ki[0]}var gd=BigInt(Number.MAX_SAFE_INTEGER),yd=BigInt(Number.MIN_SAFE_INTEGER),_e=class t{lo;hi;constructor(e,r){this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){let e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){let e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){let e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return er;if(e<gd&&e>yd)return this.fromNumber(Number(e));let r=e<0n;r&&(e=-e);let n=e>>32n,o=e-(n<<32n);return r&&(n=~n|0n,o=~o|0n,++o>Za&&(o=0n,++n>Za&&(n=0n))),new t(Number(o),Number(n))}static fromNumber(e){if(e===0)return er;let r=e<0;r&&(e=-e);let n=e>>>0,o=(e-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new t(n,o)}static from(e){return typeof e=="number"?t.fromNumber(e):typeof e=="bigint"?t.fromBigInt(e):typeof e=="string"?t.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new t(e.low>>>0,e.high>>>0):er}},er=new _e(0,0);er.toBigInt=function(){return 0n};er.zzEncode=er.zzDecode=function(){return this};er.length=function(){return 1};var Za=4294967296n;function Wa(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function Ja(t,e,r){if(r-e<1)return"";let o,i=[],s=0,a;for(;e<r;)a=t[e++],a<128?i[s++]=a:a>191&&a<224?i[s++]=(a&31)<<6|t[e++]&63:a>239&&a<365?(a=((a&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,i[s++]=55296+(a>>10),i[s++]=56320+(a&1023)):i[s++]=(a&15)<<12|(t[e++]&63)<<6|t[e++]&63,s>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o!=null?(s>0&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))}function $i(t,e,r){let n=r,o,i;for(let s=0;s<t.length;++s)o=t.charCodeAt(s),o<128?e[r++]=o:o<2048?(e[r++]=o>>6|192,e[r++]=o&63|128):(o&64512)===55296&&((i=t.charCodeAt(s+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++s,e[r++]=o>>18|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128,e[r++]=o&63|128):(e[r++]=o>>12|224,e[r++]=o>>6&63|128,e[r++]=o&63|128);return r-n}function Ye(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function Pn(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}var qi=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Ye(this,10);return e}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Ye(this,4);return Pn(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Ye(this,4);return Pn(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Ye(this,4);let e=Ga(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw Ye(this,4);let e=Ya(this.buf,this.pos);return this.pos+=8,e}bytes(){let e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Ye(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let e=this.bytes();return Ja(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Ye(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Ye(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){let e=new _e(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Ye(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw Ye(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Ye(this,8);let e=Pn(this.buf,this.pos+=4),r=Pn(this.buf,this.pos+=4);return new _e(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let e=qa(this.buf,this.pos);return this.pos+=Qr(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function zi(t){return new qi(t instanceof Uint8Array?t:t.subarray())}function Ar(t,e,r){let n=zi(t);return e.decode(n,void 0,r)}function Gi(t){let e=t??8192,r=e>>>1,n,o=e;return function(s){if(s<1||s>r)return tt(s);o+s>e&&(n=tt(e),o=0);let a=n.subarray(o,o+=s);return o&7&&(o=(o|7)+1),a}}var tr=class{fn;len;next;val;constructor(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}};function ji(){}var Zi=class{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}},md=Gi();function bd(t){return globalThis.Buffer!=null?tt(t):md(t)}var tn=class{len;head;tail;states;constructor(){this.len=0,this.head=new tr(ji,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new tr(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new Wi((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Kn,10,_e.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){let r=_e.fromBigInt(e);return this._push(Kn,r.length(),r)}uint64Number(e){return this._push($a,Qr(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){let r=_e.fromBigInt(e).zzEncode();return this._push(Kn,r.length(),r)}sint64Number(e){let r=_e.fromNumber(e).zzEncode();return this._push(Kn,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Yi,1,e?1:0)}fixed32(e){return this._push(en,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){let r=_e.fromBigInt(e);return this._push(en,4,r.lo)._push(en,4,r.hi)}fixed64Number(e){let r=_e.fromNumber(e);return this._push(en,4,r.lo)._push(en,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(za,4,e)}double(e){return this._push(ja,8,e)}bytes(e){let r=e.length>>>0;return r===0?this._push(Yi,1,0):this.uint32(r)._push(xd,r,e)}string(e){let r=Wa(e);return r!==0?this.uint32(r)._push($i,r,e):this._push(Yi,1,0)}fork(){return this.states=new Zi(this),this.head=this.tail=new tr(ji,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new tr(ji,0,0),this.len=0),this}ldelim(){let e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next,r=bd(this.len),n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}};function Yi(t,e,r){e[r]=t&255}function wd(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}var Wi=class extends tr{next;constructor(e,r){super(wd,e,r),this.next=void 0}};function Kn(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function en(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function xd(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(tn.prototype.bytes=function(t){let e=t.length>>>0;return this.uint32(e),e>0&&this._push(Ed,e,t),this},tn.prototype.string=function(t){let e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(Bd,e,t),this});function Ed(t,e,r){e.set(t,r)}function Bd(t,e,r){t.length<40?$i(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(Z(t),r)}function Ji(){return new tn}function Sr(t,e){let r=Ji();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var kr;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(kr||(kr={}));function $n(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function rn(t){function e(o){if(t[o.toString()]==null)throw new Error("Invalid enum value");return t[o]}let r=function(i,s){let a=e(i);s.int32(a)},n=function(i){let s=i.int32();return e(s)};return $n("enum",kr.VARINT,r,n)}function Rr(t,e){return $n("message",kr.LENGTH_DELIMITED,t,e)}var re;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(re||(re={}));var Xi;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(Xi||(Xi={}));(function(t){t.codec=()=>rn(Xi)})(re||(re={}));var nt;(function(t){let e;t.codec=()=>(e==null&&(e=Rr((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),re.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let o={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let s=r.uint32();switch(s>>>3){case 1:o.Type=re.codec().decode(r);break;case 2:o.Data=r.bytes();break;default:r.skipType(s&7);break}}return o})),e),t.encode=r=>Sr(r,t.codec()),t.decode=r=>Ar(r,t.codec())})(nt||(nt={}));var ot;(function(t){let e;t.codec=()=>(e==null&&(e=Rr((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),re.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let o={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let s=r.uint32();switch(s>>>3){case 1:o.Type=re.codec().decode(r);break;case 2:o.Data=r.bytes();break;default:r.skipType(s&7);break}}return o})),e),t.encode=r=>Sr(r,t.codec()),t.decode=r=>Ar(r,t.codec())})(ot||(ot={}));var nn=class{_key;constructor(e){this._key=Ir(e,Br)}verify(e,r){return Da(this._key,r,e)}marshal(){return this._key}get bytes(){return nt.encode({Type:re.Ed25519,Data:this.marshal()}).subarray()}equals(e){return be(this.bytes,e.bytes)}hash(){let e=me.digest(this.bytes);return He(e)?e.then(({bytes:r})=>r):e.bytes}},rr=class{_key;_publicKey;constructor(e,r){this._key=Ir(e,gt),this._publicKey=Ir(r,Br)}sign(e){return Va(this._key,e)}get public(){return new nn(this._publicKey)}marshal(){return this._key}get bytes(){return ot.encode({Type:re.Ed25519,Data:this.marshal()}).subarray()}equals(e){return be(this.bytes,e.bytes)}async hash(){let e=me.digest(this.bytes),r;return He(e)?{bytes:r}=await e:r=e.bytes,r}async id(){let e=qe.digest(this.public.bytes);return ye.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return vr(this.bytes,e);throw new q(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function vd(t){if(t.length>gt){t=Ir(t,gt+Br);let n=t.subarray(0,gt),o=t.subarray(gt,t.length);return new rr(n,o)}t=Ir(t,gt);let e=t.subarray(0,gt),r=t.subarray(Br);return new rr(e,r)}function Ad(t){return t=Ir(t,Br),new nn(t)}async function Sd(){let{privateKey:t,publicKey:e}=Ua();return new rr(t,e)}async function Qa(t){let{privateKey:e,publicKey:r}=La(t);return new rr(e,r)}function Ir(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new q(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}function ne(t,e="utf8"){let r=Tn[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var us={};fe(us,{MAX_RSA_KEY_SIZE:()=>yn,RsaPrivateKey:()=>Ur,RsaPublicKey:()=>gn,fromJwk:()=>Xd,generateKeyPair:()=>Qd,unmarshalRsaPrivateKey:()=>as,unmarshalRsaPublicKey:()=>Jd});function nr(t){if(isNaN(t)||t<=0)throw new q("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return br(t)}var Ht={};fe(Ht,{exportToPem:()=>Gd,importFromPem:()=>jd,jwkToPkcs1:()=>Kd,jwkToPkix:()=>qd,pkcs1ToJwk:()=>Pd,pkixToJwk:()=>$d});var zn=class extends yr{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Nn(e);let n=It(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(n.length>o?e.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(e){return gr(this),this.iHash.update(e),this}digestInto(e){gr(this),pr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return e=e,e.finished=o,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},on=(t,e,r)=>new zn(t,e).update(r).digest();on.create=(t,e)=>new zn(t,e);function kd(t,e,r,n){Nn(t);let o=ba({dkLen:32,asyncTick:10},n),{c:i,dkLen:s,asyncTick:a}=o;if(dr(i),dr(s),dr(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=It(e),f=It(r),u=new Uint8Array(s),l=on.create(t,c),h=l._cloneInto().update(f);return{c:i,dkLen:s,asyncTick:a,DK:u,PRF:l,PRFSalt:h}}function Rd(t,e,r,n,o){return t.destroy(),e.destroy(),n&&n.destroy(),o.fill(0),r}async function es(t,e,r,n){let{c:o,dkLen:i,asyncTick:s,DK:a,PRF:c,PRFSalt:f}=kd(t,e,r,n),u,l=new Uint8Array(4),h=mr(l),B=new Uint8Array(c.outputLen);for(let v=1,p=0;p<i;v++,p+=c.outputLen){let d=a.subarray(p,p+c.outputLen);h.setInt32(0,v,!1),(u=f._cloneInto(u)).update(l).digestInto(B),d.set(B.subarray(0,d.length)),await ya(o-1,s,()=>{c._cloneInto(u).update(B).digestInto(B);for(let x=0;x<d.length;x++)d[x]^=B[x]})}return Rd(c,f,a,u,B)}var j=kn(ec());function or(t,e){let r=0;if(t.length===1)return t[0];for(let n=t.length-1;n>=0;n--)r+=t[t.length-1-n]*Math.pow(2,e*n);return r}function Ot(t,e,r=-1){let n=r,o=t,i=0,s=Math.pow(2,e);for(let a=1;a<8;a++){if(t<s){let c;if(n<0)c=new ArrayBuffer(a),i=a;else{if(n<a)return new ArrayBuffer(0);c=new ArrayBuffer(n),i=n}let f=new Uint8Array(c);for(let u=a-1;u>=0;u--){let l=Math.pow(2,u*e);f[i-u-1]=Math.floor(o/l),o-=f[i-u-1]*l}return c}s*=Math.pow(2,e)}return new ArrayBuffer(0)}function Yn(...t){let e=0,r=0;for(let i of t)e+=i.length;let n=new ArrayBuffer(e),o=new Uint8Array(n);for(let i of t)o.set(i,r),r+=i.length;return o}function rs(){let t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let a=t[0]===255&&t[1]&128,c=t[0]===0&&(t[1]&128)===0;(a||c)&&this.warnings.push("Needlessly long format")}let e=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(e);for(let a=0;a<this.valueHex.byteLength;a++)r[a]=0;r[0]=t[0]&128;let n=or(r,8),o=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(o);for(let a=0;a<this.valueHex.byteLength;a++)i[a]=t[a];return i[0]&=127,or(i,8)-n}function tc(t){let e=t<0?t*-1:t,r=128;for(let n=1;n<8;n++){if(e<=r){if(t<0){let s=r-e,a=Ot(s,8,n),c=new Uint8Array(a);return c[0]|=128,a}let o=Ot(e,8,n),i=new Uint8Array(o);if(i[0]&128){let s=o.slice(0),a=new Uint8Array(s);o=new ArrayBuffer(o.byteLength+1),i=new Uint8Array(o);for(let c=0;c<s.byteLength;c++)i[c+1]=a[c];i[0]=0}return o}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function rc(t,e){if(t.byteLength!==e.byteLength)return!1;let r=new Uint8Array(t),n=new Uint8Array(e);for(let o=0;o<r.length;o++)if(r[o]!==n[o])return!1;return!0}function Te(t,e){let r=t.toString(10);if(e<r.length)return"";let n=e-r.length,o=new Array(n);for(let s=0;s<n;s++)o[s]="0";return o.join("").concat(r)}var am=Math.log(2);function Zn(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function ns(t){let e=0,r=0;for(let o=0;o<t.length;o++){let i=t[o];e+=i.byteLength}let n=new Uint8Array(e);for(let o=0;o<t.length;o++){let i=t[o];n.set(new Uint8Array(i),r),r+=i.byteLength}return n.buffer}function xt(t,e,r,n){return e instanceof Uint8Array?e.byteLength?r<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-r-n<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}var an=class{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return ns(this.items)}},sn=[new Uint8Array([1])],nc="0123456789";var Nr="",We=new ArrayBuffer(0),os=new Uint8Array(0),cn="EndOfContent",ic="OCTET STRING",sc="BIT STRING";function Et(t){var e;return e=class extends t{constructor(...n){var o;super(...n);let i=n[0]||{};this.isHexOnly=(o=i.isHexOnly)!==null&&o!==void 0?o:!1,this.valueHexView=i.valueHex?j.BufferSourceConverter.toUint8Array(i.valueHex):os}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,o,i){let s=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!xt(this,s,o,i))return-1;let a=o+i;return this.valueHexView=s.subarray(o,a),this.valueHexView.length?(this.blockLength=i,a):(this.warnings.push("Zero buffer length"),o)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",We)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:j.Convert.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}var mt=class{constructor({blockLength:e=0,error:r=Nr,warnings:n=[],valueBeforeDecode:o=os}={}){this.blockLength=e,this.error=r,this.warnings=n,this.valueBeforeDecodeView=j.BufferSourceConverter.toUint8Array(o)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:j.Convert.ToHex(this.valueBeforeDecodeView)}}};mt.NAME="baseBlock";var Be=class extends mt{fromBER(e,r,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}};Be.NAME="valueBlock";var Wn=class extends Et(mt){constructor({idBlock:e={}}={}){var r,n,o,i;super(),e?(this.isHexOnly=(r=e.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=e.valueHex?j.BufferSourceConverter.toUint8Array(e.valueHex):os,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(o=e.tagNumber)!==null&&o!==void 0?o:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",We}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){let o=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,r|=i,o[0]=r}return o.buffer}if(!this.isHexOnly){let o=Ot(this.tagNumber,7),i=new Uint8Array(o),s=o.byteLength,a=new Uint8Array(s+1);if(a[0]=r|31,!e){for(let c=0;c<s-1;c++)a[c+1]=i[c]|128;a[s]=i[s-1]}return a.buffer}let n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=r|31,!e){let o=this.valueHexView;for(let i=0;i<o.length-1;i++)n[i+1]=o[i]|128;n[this.valueHexView.byteLength]=o[o.length-1]}return n.buffer}fromBER(e,r,n){let o=j.BufferSourceConverter.toUint8Array(e);if(!xt(this,o,r,n))return-1;let i=o.subarray(r,r+n);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;let a=i[0]&31;if(a!==31)this.tagNumber=a,this.blockLength=1;else{let c=1,f=this.valueHexView=new Uint8Array(255),u=255;for(;i[c]&128;){if(f[c-1]=i[c]&127,c++,c>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(c===u){u+=255;let h=new Uint8Array(u);for(let B=0;B<f.length;B++)h[B]=f[B];f=this.valueHexView=new Uint8Array(u)}}this.blockLength=c+1,f[c-1]=i[c]&127;let l=new Uint8Array(c);for(let h=0;h<c;h++)l[h]=f[h];f=this.valueHexView=new Uint8Array(c),f.set(l),this.blockLength<=9?this.tagNumber=or(f,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}};Wn.NAME="identificationBlock";var Jn=class extends mt{constructor({lenBlock:e={}}={}){var r,n,o;super(),this.isIndefiniteForm=(r=e.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(o=e.length)!==null&&o!==void 0?o:0}fromBER(e,r,n){let o=j.BufferSourceConverter.toUint8Array(e);if(!xt(this,o,r,n))return-1;let i=o.subarray(r,r+n);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,r+this.blockLength;let s=i[0]&127;if(s>8)return this.error="Too big integer",-1;if(s+1>i.length)return this.error="End of input reached before message was fully decoded",-1;let a=r+1,c=o.subarray(a,a+s);return c[s-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=or(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=s+1,r+this.blockLength}toBER(e=!1){let r,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=128),r;if(this.longFormUsed){let o=Ot(this.length,8);if(o.byteLength>127)return this.error="Too big length",We;if(r=new ArrayBuffer(o.byteLength+1),e)return r;let i=new Uint8Array(o);n=new Uint8Array(r),n[0]=o.byteLength|128;for(let s=0;s<o.byteLength;s++)n[s+1]=i[s];return r}return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}};Jn.NAME="lengthBlock";var U={},we=class extends mt{constructor({name:e=Nr,optional:r=!1,primitiveSchema:n,...o}={},i){super(o),this.name=e,this.optional=r,n&&(this.primitiveSchema=n),this.idBlock=new Wn(o),this.lenBlock=new Jn(o),this.valueBlock=i?new i(o):new Be(o)}fromBER(e,r,n){let o=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return o===-1?(this.error=this.valueBlock.error,o):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),o)}toBER(e,r){let n=r||new an;r||ac(this);let o=this.idBlock.toBER(e);if(n.write(o),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{let i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;let s=this.lenBlock.toBER(e);n.write(s),n.write(i)}return r?We:n.final()}toJSON(){let e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():j.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${j.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;let r=this.toBER(),n=e.toBER();return rc(r,n)}};we.NAME="BaseBlock";function ac(t){if(t instanceof U.Constructed)for(let e of t.valueBlock.value)ac(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}var Xn=class extends we{constructor({value:e=Nr,...r}={},n){super(r,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,r,n){let o=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return o===-1?(this.error=this.valueBlock.error,o):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),o)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}};Xn.NAME="BaseStringBlock";var Qn=class extends Et(Be){constructor({isHexOnly:e=!0,...r}={}){super(r),this.isHexOnly=e}};Qn.NAME="PrimitiveValueBlock";var cc,eo=class extends we{constructor(e={}){super(e,Qn),this.idBlock.isConstructed=!1}};cc=eo;U.Primitive=cc;eo.NAME="PRIMITIVE";function Dd(t,e){if(t instanceof e)return t;let r=new e;return r.idBlock=t.idBlock,r.lenBlock=t.lenBlock,r.warnings=t.warnings,r.valueBeforeDecodeView=t.valueBeforeDecodeView,r}function Lo(t,e=0,r=t.length){let n=e,o=new we({},Be),i=new mt;if(!xt(i,t,e,r))return o.error=i.error,{offset:-1,result:o};if(!t.subarray(e,e+r).length)return o.error="Zero buffer length",{offset:-1,result:o};let a=o.idBlock.fromBER(t,e,r);if(o.idBlock.warnings.length&&o.warnings.concat(o.idBlock.warnings),a===-1)return o.error=o.idBlock.error,{offset:-1,result:o};if(e=a,r-=o.idBlock.blockLength,a=o.lenBlock.fromBER(t,e,r),o.lenBlock.warnings.length&&o.warnings.concat(o.lenBlock.warnings),a===-1)return o.error=o.lenBlock.error,{offset:-1,result:o};if(e=a,r-=o.lenBlock.blockLength,!o.idBlock.isConstructed&&o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let c=we;switch(o.idBlock.tagClass){case 1:if(o.idBlock.tagNumber>=37&&o.idBlock.isHexOnly===!1)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};c=U.EndOfContent;break;case 1:c=U.Boolean;break;case 2:c=U.Integer;break;case 3:c=U.BitString;break;case 4:c=U.OctetString;break;case 5:c=U.Null;break;case 6:c=U.ObjectIdentifier;break;case 10:c=U.Enumerated;break;case 12:c=U.Utf8String;break;case 13:c=U.RelativeObjectIdentifier;break;case 14:c=U.TIME;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:c=U.Sequence;break;case 17:c=U.Set;break;case 18:c=U.NumericString;break;case 19:c=U.PrintableString;break;case 20:c=U.TeletexString;break;case 21:c=U.VideotexString;break;case 22:c=U.IA5String;break;case 23:c=U.UTCTime;break;case 24:c=U.GeneralizedTime;break;case 25:c=U.GraphicString;break;case 26:c=U.VisibleString;break;case 27:c=U.GeneralString;break;case 28:c=U.UniversalString;break;case 29:c=U.CharacterString;break;case 30:c=U.BmpString;break;case 31:c=U.DATE;break;case 32:c=U.TimeOfDay;break;case 33:c=U.DateTime;break;case 34:c=U.Duration;break;default:{let f=o.idBlock.isConstructed?new U.Constructed:new U.Primitive;f.idBlock=o.idBlock,f.lenBlock=o.lenBlock,f.warnings=o.warnings,o=f}}break;case 2:case 3:case 4:default:c=o.idBlock.isConstructed?U.Constructed:U.Primitive}return o=Dd(o,c),a=o.fromBER(t,e,o.lenBlock.isIndefiniteForm?r:o.lenBlock.length),o.valueBeforeDecodeView=t.subarray(n,n+o.blockLength),{offset:a,result:o}}function _r(t){if(!t.byteLength){let e=new we({},Be);return e.error="Input buffer has zero length",{offset:-1,result:e}}return Lo(j.BufferSourceConverter.toUint8Array(t).slice(),0,t.byteLength)}function Od(t,e){return t?1:e}var it=class extends Be{constructor({value:e=[],isIndefiniteForm:r=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=r}fromBER(e,r,n){let o=j.BufferSourceConverter.toUint8Array(e);if(!xt(this,o,r,n))return-1;if(this.valueBeforeDecodeView=o.subarray(r,r+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let i=r;for(;Od(this.isIndefiniteForm,n)>0;){let s=Lo(o,i,n);if(s.offset===-1)return this.error=s.result.error,this.warnings.concat(s.result.warnings),-1;if(i=s.offset,this.blockLength+=s.result.blockLength,n-=s.result.blockLength,this.value.push(s.result),this.isIndefiniteForm&&s.result.constructor.NAME===cn)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===cn?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,r){let n=r||new an;for(let o=0;o<this.value.length;o++)this.value[o].toBER(e,n);return r?We:n.final()}toJSON(){let e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let r of this.value)e.value.push(r.toJSON());return e}};it.NAME="ConstructedValueBlock";var uc,Ft=class extends we{constructor(e={}){super(e,it),this.idBlock.isConstructed=!0}fromBER(e,r,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let o=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return o===-1?(this.error=this.valueBlock.error,o):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),o)}onAsciiEncoding(){let e=[];for(let n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(o=>`  ${o}`).join(`
`));let r=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${r} :
${e.join(`
`)}`:`${r} :`}};uc=Ft;U.Constructed=uc;Ft.NAME="CONSTRUCTED";var to=class extends Be{fromBER(e,r,n){return r}toBER(e){return We}};to.override="EndOfContentValueBlock";var lc,ro=class extends we{constructor(e={}){super(e,to),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}};lc=ro;U.EndOfContent=lc;ro.NAME=cn;var fc,Mt=class extends we{constructor(e={}){super(e,Be),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,r,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,r+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+n}toBER(e,r){let n=new ArrayBuffer(2);if(!e){let o=new Uint8Array(n);o[0]=5,o[1]=0}return r&&r.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}};fc=Mt;U.Null=fc;Mt.NAME="NULL";var no=class extends Et(Be){constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=j.BufferSourceConverter.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(let e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,r,n){let o=j.BufferSourceConverter.toUint8Array(e);return xt(this,o,r,n)?(this.valueHexView=o.subarray(r,r+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,rs.call(this),this.blockLength=n,r+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}};no.NAME="BooleanValueBlock";var hc,oo=class extends we{constructor(e={}){super(e,no),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};hc=oo;U.Boolean=hc;oo.NAME="BOOLEAN";var io=class extends Et(it){constructor({isConstructed:e=!1,...r}={}){super(r),this.isConstructed=e}fromBER(e,r,n){let o=0;if(this.isConstructed){if(this.isHexOnly=!1,o=it.prototype.fromBER.call(this,e,r,n),o===-1)return o;for(let i=0;i<this.value.length;i++){let s=this.value[i].constructor.NAME;if(s===cn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(s!==ic)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,o=super.fromBER(e,r,n),this.blockLength=n;return o}toBER(e,r){return this.isConstructed?it.prototype.toBER.call(this,e,r):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}};io.NAME="OctetStringValueBlock";var dc,bt=class t extends we{constructor({idBlock:e={},lenBlock:r={},...n}={}){var o,i;(o=n.isConstructed)!==null&&o!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},io),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,r,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){let i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(r,r+n);try{if(i.byteLength){let s=Lo(i,0,i.byteLength);s.offset!==-1&&s.offset===n&&(this.valueBlock.value=[s.result])}}catch{}}return super.fromBER(e,r,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Ft.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${j.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let e=[];for(let r of this.valueBlock.value)r instanceof t&&e.push(r.valueBlock.valueHexView);return j.BufferSourceConverter.concat(e)}};dc=bt;U.OctetString=dc;bt.NAME=ic;var so=class extends Et(it){constructor({unusedBits:e=0,isConstructed:r=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,n){if(!n)return r;let o=-1;if(this.isConstructed){if(o=it.prototype.fromBER.call(this,e,r,n),o===-1)return o;for(let a of this.value){let c=a.constructor.NAME;if(c===cn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==sc)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let f=a.valueBlock;if(this.unusedBits>0&&f.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=f.unusedBits}return o}let i=j.BufferSourceConverter.toUint8Array(e);if(!xt(this,i,r,n))return-1;let s=i.subarray(r,r+n);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let a=s.subarray(1);try{if(a.byteLength){let c=Lo(a,0,a.byteLength);c.offset!==-1&&c.offset===n-1&&(this.value=[c.result])}}catch{}}return this.valueHexView=s.subarray(1),this.blockLength=s.length,r+n}toBER(e,r){if(this.isConstructed)return it.prototype.toBER.call(this,e,r);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return We;let n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}};so.NAME="BitStringValueBlock";var pc,Tr=class extends we{constructor({idBlock:e={},lenBlock:r={},...n}={}){var o,i;(o=n.isConstructed)!==null&&o!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},so),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Ft.prototype.onAsciiEncoding.call(this);{let e=[],r=this.valueBlock.valueHexView;for(let o of r)e.push(o.toString(2).padStart(8,"0"));let n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}};pc=Tr;U.BitString=pc;Tr.NAME=sc;var gc;function Fd(t,e){let r=new Uint8Array([0]),n=new Uint8Array(t),o=new Uint8Array(e),i=n.slice(0),s=i.length-1,a=o.slice(0),c=a.length-1,f=0,u=c<s?s:c,l=0;for(let h=u;h>=0;h--,l++){switch(!0){case l<a.length:f=i[s-l]+a[c-l]+r[0];break;default:f=i[s-l]+r[0]}switch(r[0]=f/10,!0){case l>=i.length:i=Yn(new Uint8Array([f%10]),i);break;default:i[s-l]=f%10}}return r[0]>0&&(i=Yn(r,i)),i}function oc(t){if(t>=sn.length)for(let e=sn.length;e<=t;e++){let r=new Uint8Array([0]),n=sn[e-1].slice(0);for(let o=n.length-1;o>=0;o--){let i=new Uint8Array([(n[o]<<1)+r[0]]);r[0]=i[0]/10,n[o]=i[0]%10}r[0]>0&&(n=Yn(r,n)),sn.push(n)}return sn[t]}function Md(t,e){let r=0,n=new Uint8Array(t),o=new Uint8Array(e),i=n.slice(0),s=i.length-1,a=o.slice(0),c=a.length-1,f,u=0;for(let l=c;l>=0;l--,u++)switch(f=i[s-u]-a[c-u]-r,!0){case f<0:r=1,i[s-u]=f+10;break;default:r=0,i[s-u]=f}if(r>0)for(let l=s-c+1;l>=0;l--,u++)if(f=i[s-u]-r,f<0)r=1,i[s-u]=f+10;else{r=0,i[s-u]=f;break}return i.slice()}var un=class extends Et(Be){constructor({value:e,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=rs.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(tc(e))}get valueDec(){return this._valueDec}fromDER(e,r,n,o=0){let i=this.fromBER(e,r,n);if(i===-1)return i;let s=this.valueHexView;return s[0]===0&&s[1]&128?this.valueHexView=s.subarray(1):o!==0&&s.length<o&&(o-s.length>1&&(o=s.length+1),this.valueHexView=s.subarray(o-s.length)),i}toDER(e=!1){let r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{let n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(r,1),this.valueHexView=n}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,r,n){let o=super.fromBER(e,r,n);return o===-1||this.setValueHex(),o}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let e=this.valueHexView.length*8-1,r=new Uint8Array(this.valueHexView.length*8/3),n=0,o,i=this.valueHexView,s="",a=!1;for(let c=i.byteLength-1;c>=0;c--){o=i[c];for(let f=0;f<8;f++){if((o&1)===1)switch(n){case e:r=Md(oc(n),r),s="-";break;default:r=Fd(r,oc(n))}n++,o>>=1}}for(let c=0;c<r.length;c++)r[c]&&(a=!0),a&&(s+=nc.charAt(r[c]));return a===!1&&(s+=nc.charAt(0)),s}};gc=un;un.NAME="IntegerValueBlock";Object.defineProperty(gc.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var yc,se=class t extends we{constructor(e={}){super(e,un),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Zn(),BigInt(this.valueBlock.toString())}static fromBigInt(e){Zn();let r=BigInt(e),n=new an,o=r.toString(16).replace(/^-/,""),i=new Uint8Array(j.Convert.FromHex(o));if(r<0){let a=new Uint8Array(i.length+(i[0]&128?1:0));a[0]|=128;let f=BigInt(`0x${j.Convert.ToHex(a)}`)+r,u=j.BufferSourceConverter.toUint8Array(j.Convert.FromHex(f.toString(16)));u[0]|=128,n.write(u)}else i[0]&128&&n.write(new Uint8Array([0])),n.write(i);return new t({valueHex:n.final()})}convertToDER(){let e=new t({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new t({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}};yc=se;U.Integer=yc;se.NAME="INTEGER";var mc,ao=class extends se{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}};mc=ao;U.Enumerated=mc;ao.NAME="ENUMERATED";var ln=class extends Et(Be){constructor({valueDec:e=-1,isFirstSid:r=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=r}fromBER(e,r,n){if(!n)return r;let o=j.BufferSourceConverter.toUint8Array(e);if(!xt(this,o,r,n))return-1;let i=o.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=i[a]&127,this.blockLength++,!!(i[a]&128));a++);let s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)s[a]=this.valueHexView[a];return this.valueHexView=s,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=or(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){Zn();let r=BigInt(e).toString(2);for(;r.length%7;)r="0"+r;let n=new Uint8Array(r.length/7);for(let o=0;o<n.length;o++)n[o]=parseInt(r.slice(o*7,o*7+7),2)+(o+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let o=this.valueHexView,i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength-1;s++)i[s]=o[s]|128;return i[this.blockLength-1]=o[this.blockLength-1],i.buffer}let r=Ot(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",We;let n=new Uint8Array(r.byteLength);if(!e){let o=new Uint8Array(r),i=r.byteLength-1;for(let s=0;s<i;s++)n[s]=o[s]|128;n[i]=o[i]}return n}toString(){let e="";if(this.isHexOnly)e=j.Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",r-=40):(e="2.",r-=80),e+=r.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}};ln.NAME="sidBlock";var co=class extends Be{constructor({value:e=Nr,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let o=r;for(;n>0;){let i=new ln;if(o=i.fromBER(e,o,n),o===-1)return this.blockLength=0,this.error=i.error,o;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return o}toBER(e){let r=[];for(let n=0;n<this.value.length;n++){let o=this.value[n].toBER(e);if(o.byteLength===0)return this.error=this.value[n].error,We;r.push(o)}return ns(r)}fromString(e){this.value=[];let r=0,n=0,o="",i=!1;do if(n=e.indexOf(".",r),n===-1?o=e.substring(r):o=e.substring(r,n),r=n+1,i){let s=this.value[0],a=0;switch(s.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:this.value=[];return}let c=parseInt(o,10);if(isNaN(c))return;s.valueDec=c+a,i=!1}else{let s=new ln;if(o>Number.MAX_SAFE_INTEGER){Zn();let a=BigInt(o);s.valueBigInt=a}else if(s.valueDec=parseInt(o,10),isNaN(s.valueDec))return;this.value.length||(s.isFirstSid=!0,i=!0),this.value.push(s)}while(n!==-1)}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let o=this.value[n].toString();n!==0&&(e=`${e}.`),r?(o=`{${o}}`,this.value[n].isFirstSid?e=`2.{${o} - 80}`:e+=o):e+=o}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}};co.NAME="ObjectIdentifierValueBlock";var bc,Ze=class extends we{constructor(e={}){super(e,co),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};bc=Ze;U.ObjectIdentifier=bc;Ze.NAME="OBJECT IDENTIFIER";var fn=class extends Et(mt){constructor({valueDec:e=0,...r}={}){super(r),this.valueDec=e}fromBER(e,r,n){if(n===0)return r;let o=j.BufferSourceConverter.toUint8Array(e);if(!xt(this,o,r,n))return-1;let i=o.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=i[a]&127,this.blockLength++,!!(i[a]&128));a++);let s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)s[a]=this.valueHexView[a];return this.valueHexView=s,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=or(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let o=this.valueHexView,i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength-1;s++)i[s]=o[s]|128;return i[this.blockLength-1]=o[this.blockLength-1],i.buffer}let r=Ot(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",We;let n=new Uint8Array(r.byteLength);if(!e){let o=new Uint8Array(r),i=r.byteLength-1;for(let s=0;s<i;s++)n[s]=o[s]|128;n[i]=o[i]}return n.buffer}toString(){let e="";return this.isHexOnly?e=j.Convert.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}};fn.NAME="relativeSidBlock";var uo=class extends Be{constructor({value:e=Nr,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let o=r;for(;n>0;){let i=new fn;if(o=i.fromBER(e,o,n),o===-1)return this.blockLength=0,this.error=i.error,o;this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return o}toBER(e,r){let n=[];for(let o=0;o<this.value.length;o++){let i=this.value[o].toBER(e);if(i.byteLength===0)return this.error=this.value[o].error,We;n.push(i)}return ns(n)}fromString(e){this.value=[];let r=0,n=0,o="";do{n=e.indexOf(".",r),n===-1?o=e.substring(r):o=e.substring(r,n),r=n+1;let i=new fn;if(i.valueDec=parseInt(o,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(n!==-1);return!0}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let o=this.value[n].toString();n!==0&&(e=`${e}.`),r&&(o=`{${o}}`),e+=o}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}};uo.NAME="RelativeObjectIdentifierValueBlock";var wc,lo=class extends we{constructor(e={}){super(e,uo),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};wc=lo;U.RelativeObjectIdentifier=wc;lo.NAME="RelativeObjectIdentifier";var xc,he=class extends Ft{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}};xc=he;U.Sequence=xc;he.NAME="SEQUENCE";var Ec,fo=class extends Ft{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};Ec=fo;U.Set=Ec;fo.NAME="SET";var ho=class extends Et(Be){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=Nr}toJSON(){return{...super.toJSON(),value:this.value}}};ho.NAME="StringValueBlock";var po=class extends ho{};po.NAME="SimpleStringValueBlock";var ke=class extends Xn{constructor({...e}={}){super(e,po)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,j.BufferSourceConverter.toUint8Array(e))}fromString(e){let r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r);for(let o=0;o<r;o++)n[o]=e.charCodeAt(o);this.valueBlock.value=e}};ke.NAME="SIMPLE STRING";var go=class extends ke{fromBuffer(e){this.valueBlock.valueHexView=j.BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=j.Convert.ToUtf8String(e)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=j.Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(j.Convert.FromUtf8String(e)),this.valueBlock.value=e}};go.NAME="Utf8StringValueBlock";var Bc,wt=class extends go{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}};Bc=wt;U.Utf8String=Bc;wt.NAME="UTF8String";var yo=class extends ke{fromBuffer(e){this.valueBlock.value=j.Convert.ToUtf16String(e),this.valueBlock.valueHexView=j.BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(j.Convert.FromUtf16String(e))}};yo.NAME="BmpStringValueBlock";var vc,mo=class extends yo{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}};vc=mo;U.BmpString=vc;mo.NAME="BMPString";var bo=class extends ke{fromBuffer(e){let r=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(r);for(let o=0;o<n.length;o+=4)n[o]=n[o+3],n[o+1]=n[o+2],n[o+2]=0,n[o+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(e){let r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let o=0;o<r;o++){let i=Ot(e.charCodeAt(o),8),s=new Uint8Array(i);if(s.length>4)continue;let a=4-s.length;for(let c=s.length-1;c>=0;c--)n[o*4+c+a]=s[c]}this.valueBlock.value=e}};bo.NAME="UniversalStringValueBlock";var Ac,wo=class extends bo{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}};Ac=wo;U.UniversalString=Ac;wo.NAME="UniversalString";var Sc,xo=class extends ke{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}};Sc=xo;U.NumericString=Sc;xo.NAME="NumericString";var kc,Eo=class extends ke{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}};kc=Eo;U.PrintableString=kc;Eo.NAME="PrintableString";var Rc,Bo=class extends ke{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}};Rc=Bo;U.TeletexString=Rc;Bo.NAME="TeletexString";var Ic,vo=class extends ke{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}};Ic=vo;U.VideotexString=Ic;vo.NAME="VideotexString";var Cc,Ao=class extends ke{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}};Cc=Ao;U.IA5String=Cc;Ao.NAME="IA5String";var Tc,So=class extends ke{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}};Tc=So;U.GraphicString=Tc;So.NAME="GraphicString";var Nc,hn=class extends ke{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}};Nc=hn;U.VisibleString=Nc;hn.NAME="VisibleString";var _c,ko=class extends ke{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}};_c=ko;U.GeneralString=_c;ko.NAME="GeneralString";var Uc,Ro=class extends ke{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}};Uc=Ro;U.CharacterString=Uc;Ro.NAME="CharacterString";var Lc,dn=class extends hn{constructor({value:e,valueDate:r,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let o=0;o<e.length;o++)this.valueBlock.valueHexView[o]=e.charCodeAt(o)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,j.BufferSourceConverter.toUint8Array(e)))}toBuffer(){let e=this.toString(),r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return r}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){let n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}let o=parseInt(n[1],10);o>=50?this.year=1900+o:this.year=2e3+o,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){let r=new Array(7);return r[0]=Te(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=Te(this.month,2),r[2]=Te(this.day,2),r[3]=Te(this.hour,2),r[4]=Te(this.minute,2),r[5]=Te(this.second,2),r[6]="Z",r.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}};Lc=dn;U.UTCTime=Lc;dn.NAME="UTCTime";var Vc,Io=class extends dn{constructor(e={}){var r;super(e),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let r=!1,n="",o="",i=0,s,a=0,c=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),r=!0;else{let l=new Number(e[e.length-1]);if(isNaN(l.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let l=1,h=n.indexOf("+"),B="";if(h===-1&&(h=n.indexOf("-"),l=-1),h!==-1){if(B=n.substring(h+1),n=n.substring(0,h),B.length!==2&&B.length!==4)throw new Error("Wrong input string for conversion");let v=parseInt(B.substring(0,2),10);if(isNaN(v.valueOf()))throw new Error("Wrong input string for conversion");if(a=l*v,B.length===4){if(v=parseInt(B.substring(2,4),10),isNaN(v.valueOf()))throw new Error("Wrong input string for conversion");c=l*v}}}let f=n.indexOf(".");if(f===-1&&(f=n.indexOf(",")),f!==-1){let l=new Number(`0${n.substring(f)}`);if(isNaN(l.valueOf()))throw new Error("Wrong input string for conversion");i=l.valueOf(),o=n.substring(0,f)}else o=n;switch(!0){case o.length===8:if(s=/(\d{4})(\d{2})(\d{2})/ig,f!==-1)throw new Error("Wrong input string for conversion");break;case o.length===10:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let l=60*i;this.minute=Math.floor(l),l=60*(l-this.minute),this.second=Math.floor(l),l=1e3*(l-this.second),this.millisecond=Math.floor(l)}break;case o.length===12:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let l=60*i;this.second=Math.floor(l),l=1e3*(l-this.second),this.millisecond=Math.floor(l)}break;case o.length===14:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let l=1e3*i;this.millisecond=Math.floor(l)}break;default:throw new Error("Wrong input string for conversion")}let u=s.exec(o);if(u===null)throw new Error("Wrong input string for conversion");for(let l=1;l<u.length;l++)switch(l){case 1:this.year=parseInt(u[l],10);break;case 2:this.month=parseInt(u[l],10);break;case 3:this.day=parseInt(u[l],10);break;case 4:this.hour=parseInt(u[l],10)+a;break;case 5:this.minute=parseInt(u[l],10)+c;break;case 6:this.second=parseInt(u[l],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){let l=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=l.getUTCFullYear(),this.month=l.getUTCMonth(),this.day=l.getUTCDay(),this.hour=l.getUTCHours(),this.minute=l.getUTCMinutes(),this.second=l.getUTCSeconds(),this.millisecond=l.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){let r=[];return r.push(Te(this.year,4)),r.push(Te(this.month,2)),r.push(Te(this.day,2)),r.push(Te(this.hour,2)),r.push(Te(this.minute,2)),r.push(Te(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(Te(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}};Vc=Io;U.GeneralizedTime=Vc;Io.NAME="GeneralizedTime";var Dc,Co=class extends wt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};Dc=Co;U.DATE=Dc;Co.NAME="DATE";var Oc,To=class extends wt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}};Oc=To;U.TimeOfDay=Oc;To.NAME="TimeOfDay";var Fc,No=class extends wt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}};Fc=No;U.DateTime=Fc;No.NAME="DateTime";var Mc,_o=class extends wt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}};Mc=_o;U.Duration=Mc;_o.NAME="Duration";var Hc,Uo=class extends wt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}};Hc=Uo;U.TIME=Hc;Uo.NAME="TIME";function Pd(t){let{result:e}=_r(t),r=e.valueBlock.value;return{n:ne(st(r[1].toBigInt()),"base64url"),e:ne(st(r[2].toBigInt()),"base64url"),d:ne(st(r[3].toBigInt()),"base64url"),p:ne(st(r[4].toBigInt()),"base64url"),q:ne(st(r[5].toBigInt()),"base64url"),dp:ne(st(r[6].toBigInt()),"base64url"),dq:ne(st(r[7].toBigInt()),"base64url"),qi:ne(st(r[8].toBigInt()),"base64url"),kty:"RSA",alg:"RS256"}}function Kd(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new q("JWK was missing components","ERR_INVALID_PARAMETERS");let r=new he({value:[new se({value:0}),se.fromBigInt(at(Z(t.n,"base64url"))),se.fromBigInt(at(Z(t.e,"base64url"))),se.fromBigInt(at(Z(t.d,"base64url"))),se.fromBigInt(at(Z(t.p,"base64url"))),se.fromBigInt(at(Z(t.q,"base64url"))),se.fromBigInt(at(Z(t.dp,"base64url"))),se.fromBigInt(at(Z(t.dq,"base64url"))),se.fromBigInt(at(Z(t.qi,"base64url")))]}).toBER();return new Uint8Array(r,0,r.byteLength)}function $d(t){let{result:e}=_r(t),r=e.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:ne(st(r[0].toBigInt()),"base64url"),e:ne(st(r[1].toBigInt()),"base64url")}}function qd(t){if(t.n==null||t.e==null)throw new q("JWK was missing components","ERR_INVALID_PARAMETERS");let r=new he({value:[new he({value:[new Ze({value:"1.2.840.113549.1.1.1"}),new Mt]}),new Tr({valueHex:new he({value:[se.fromBigInt(at(Z(t.n,"base64url"))),se.fromBigInt(at(Z(t.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(r,0,r.byteLength)}function st(t){let e=t.toString(16);e.length%2>0&&(e=`0${e}`);let r=e.length/2,n=new Uint8Array(r),o=0,i=0;for(;o<r;)n[o]=parseInt(e.slice(i,i+2),16),o+=1,i+=2;return n}function at(t){let e=[];return t.forEach(function(r){let n=r.toString(16);n.length%2>0&&(n=`0${n}`),e.push(n)}),BigInt("0x"+e.join(""))}var zd=16,is=32,ss=1e4;async function Gd(t,e){let r=Ae.get(),o=new he({value:[new se({value:0}),new he({value:[new Ze({value:"1.2.840.113549.1.1.1"}),new Mt]}),new bt({valueHex:t.marshal()})]}).toBER(),i=new Uint8Array(o,0,o.byteLength),s=nr(zd),a=await es(Zr,e,s,{c:ss,dkLen:is}),c=nr(16),f=await r.subtle.importKey("raw",a,"AES-CBC",!1,["encrypt"]),u=await r.subtle.encrypt({name:"AES-CBC",iv:c},f,i),l=new he({value:[new bt({valueHex:s}),new se({value:ss}),new se({value:is}),new he({value:[new Ze({value:"1.2.840.113549.2.11"}),new Mt]})]}),h=new he({value:[new Ze({value:"1.2.840.113549.1.5.13"}),new he({value:[new he({value:[new Ze({value:"1.2.840.113549.1.5.12"}),l]}),new he({value:[new Ze({value:"2.16.840.1.101.3.4.1.42"}),new bt({valueHex:c})]})]})]}),v=new he({value:[h,new bt({valueHex:u})]}).toBER(),p=new Uint8Array(v,0,v.byteLength);return["-----BEGIN ENCRYPTED PRIVATE KEY-----",...ne(p,"base64pad").split(/(.{64})/).filter(Boolean),"-----END ENCRYPTED PRIVATE KEY-----"].join(`
`)}async function jd(t,e){let r=Ae.get(),n;if(t.includes("-----BEGIN ENCRYPTED PRIVATE KEY-----")){let o=Z(t.replace("-----BEGIN ENCRYPTED PRIVATE KEY-----","").replace("-----END ENCRYPTED PRIVATE KEY-----","").replace(/\n/g,"").trim(),"base64pad"),{result:i}=_r(o),{iv:s,salt:a,iterations:c,keySize:f,cipherText:u}=Yd(i),l=await es(Zr,e,a,{c,dkLen:f}),h=await r.subtle.importKey("raw",l,"AES-CBC",!1,["decrypt"]),B=pn(await r.subtle.decrypt({name:"AES-CBC",iv:s},h,u)),{result:v}=_r(B);n=Pc(v)}else if(t.includes("-----BEGIN PRIVATE KEY-----")){let o=Z(t.replace("-----BEGIN PRIVATE KEY-----","").replace("-----END PRIVATE KEY-----","").replace(/\n/g,"").trim(),"base64pad"),{result:i}=_r(o);n=Pc(i)}else throw new q("Could not parse private key from PEM data","ERR_INVALID_PARAMETERS");return as(n)}function Yd(t){let e=t.valueBlock.value[0];if(e.valueBlock.value[0].toString()!=="OBJECT IDENTIFIER : 1.2.840.113549.1.5.13")throw new q("Only pkcs5PBES2 encrypted private keys are supported","ERR_INVALID_PARAMS");let n=e.valueBlock.value[1].valueBlock.value[0];if(n.valueBlock.value[0].toString()!=="OBJECT IDENTIFIER : 1.2.840.113549.1.5.12")throw new q("Only pkcs5PBKDF2 key derivation functions are supported","ERR_INVALID_PARAMS");let i=n.valueBlock.value[1],s=pn(i.valueBlock.value[0].getValue()),a=ss,c=is;if(i.valueBlock.value.length===3)a=Number(i.valueBlock.value[1].toBigInt()),c=Number(i.valueBlock.value[2].toBigInt());else if(i.valueBlock.value.length===2)throw new q("Could not derive key size and iterations from PEM file - please use @libp2p/rsa to re-import your key","ERR_INVALID_PARAMS");let f=e.valueBlock.value[1].valueBlock.value[1],u=f.valueBlock.value[0].toString();if(u!=="OBJECT IDENTIFIER : 1.2.840.113549.3.7"){if(u!=="OBJECT IDENTIFIER : 1.3.14.3.2.7"){if(u!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.2"){if(u!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.22"){if(u!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.42")throw new q("Only AES-CBC encryption schemes are supported","ERR_INVALID_PARAMS")}}}}let l=pn(f.valueBlock.value[1].getValue());return{cipherText:pn(t.valueBlock.value[1].getValue()),salt:s,iterations:a,keySize:c,iv:l}}function Pc(t){return pn(t.valueBlock.value[2].getValue())}function pn(t){return new Uint8Array(t,0,t.byteLength)}async function Kc(t){let e=await Ae.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await zc(e);return{privateKey:r[0],publicKey:r[1]}}async function cs(t){let r=[await Ae.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Zd(t)],n=await zc({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function $c(t,e){let r=await Ae.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Ae.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,e instanceof Uint8Array?e:e.subarray());return new Uint8Array(n,0,n.byteLength)}async function qc(t,e,r){let n=await Ae.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Ae.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r instanceof Uint8Array?r:r.subarray())}async function zc(t){if(t.privateKey==null||t.publicKey==null)throw new q("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([Ae.get().subtle.exportKey("jwk",t.privateKey),Ae.get().subtle.exportKey("jwk",t.publicKey)])}async function Zd(t){return Ae.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Vo(t){if(t.kty!=="RSA")throw new q("invalid key type","ERR_INVALID_KEY_TYPE");if(t.n==null)throw new q("invalid key modulus","ERR_INVALID_KEY_MODULUS");return Z(t.n,"base64url").length*8}var yn=8192,gn=class{_key;constructor(e){this._key=e}verify(e,r){return qc(this._key,r,e)}marshal(){return Ht.jwkToPkix(this._key)}get bytes(){return nt.encode({Type:re.RSA,Data:this.marshal()}).subarray()}equals(e){return be(this.bytes,e.bytes)}hash(){let e=me.digest(this.bytes);return He(e)?e.then(({bytes:r})=>r):e.bytes}},Ur=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return nr(16)}sign(e){return $c(this._key,e)}get public(){if(this._publicKey==null)throw new q("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new gn(this._publicKey)}marshal(){return Ht.jwkToPkcs1(this._key)}get bytes(){return ot.encode({Type:re.RSA,Data:this.marshal()}).subarray()}equals(e){return be(this.bytes,e.bytes)}hash(){let e=me.digest(this.bytes);return He(e)?e.then(({bytes:r})=>r):e.bytes}async id(){let e=await this.public.hash();return ne(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8")return Ht.exportToPem(this,e);if(r==="libp2p-key")return vr(this.bytes,e);throw new q(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};async function as(t){let e=Ht.pkcs1ToJwk(t);if(Vo(e)>yn)throw new q("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let r=await cs(e);return new Ur(r.privateKey,r.publicKey)}function Jd(t){let e=Ht.pkixToJwk(t);if(Vo(e)>yn)throw new q("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new gn(e)}async function Xd(t){if(Vo(t)>yn)throw new q("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let e=await cs(t);return new Ur(e.privateKey,e.publicKey)}async function Qd(t){if(t>yn)throw new q("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let e=await Kc(t);return new Ur(e.privateKey,e.publicKey)}var ps={};fe(ps,{Secp256k1PrivateKey:()=>bn,Secp256k1PublicKey:()=>mn,generateKeyPair:()=>h0,unmarshalSecp256k1PrivateKey:()=>l0,unmarshalSecp256k1PublicKey:()=>f0});var e0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Kt=new Uint32Array(64),ls=class extends wr{constructor(){super(64,32,8,!1),this.A=Pt[0]|0,this.B=Pt[1]|0,this.C=Pt[2]|0,this.D=Pt[3]|0,this.E=Pt[4]|0,this.F=Pt[5]|0,this.G=Pt[6]|0,this.H=Pt[7]|0}get(){let{A:e,B:r,C:n,D:o,E:i,F:s,G:a,H:c}=this;return[e,r,n,o,i,s,a,c]}set(e,r,n,o,i,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let l=0;l<16;l++,r+=4)Kt[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let h=Kt[l-15],B=Kt[l-2],v=ze(h,7)^ze(h,18)^h>>>3,p=ze(B,17)^ze(B,19)^B>>>10;Kt[l]=p+Kt[l-7]+v+Kt[l-16]|0}let{A:n,B:o,C:i,D:s,E:a,F:c,G:f,H:u}=this;for(let l=0;l<64;l++){let h=ze(a,6)^ze(a,11)^ze(a,25),B=u+h+wa(a,c,f)+e0[l]+Kt[l]|0,p=(ze(n,2)^ze(n,13)^ze(n,22))+xa(n,o,i)|0;u=f,f=c,c=a,a=s+B|0,s=i,i=o,o=n,n=B+p|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,o,i,s,a,c,f,u)}roundClean(){Kt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Gc=_n(()=>new ls);function jc(t){t.lowS!==void 0&&Ge("lowS",t.lowS),t.prehash!==void 0&&Ge("prehash",t.prehash)}function t0(t){let e=Xr(t);rt(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=e;if(r){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:r0,hexToBytes:n0}=Vn,Bt={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,e)=>{let{Err:r}=Bt;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");let n=e.length/2,o=Zt(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let i=n>127?Zt(o.length/2|128):"";return`${Zt(t)}${i}${o}${e}`},decode(t,e){let{Err:r}=Bt,n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");let o=e[n++],i=!!(o&128),s=0;if(!i)s=o;else{let c=o&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");let f=e.subarray(n,n+c);if(f.length!==c)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let u of f)s=s<<8|u;if(n+=c,s<128)throw new r("tlv.decode(long): not minimal encoding")}let a=e.subarray(n,n+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+s)}}},_int:{encode(t){let{Err:e}=Bt;if(t<vt)throw new e("integer: negative integers are not allowed");let r=Zt(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected assertion");return r},decode(t){let{Err:e}=Bt;if(t[0]&128)throw new e("Invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return r0(t)}},toSig(t){let{Err:e,_int:r,_tlv:n}=Bt,o=typeof t=="string"?n0(t):t;xr(o);let{v:i,l:s}=n.decode(48,o);if(s.length)throw new e("Invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,i),{v:f,l:u}=n.decode(2,c);if(u.length)throw new e("Invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(f)}},hexFromSig(t){let{_tlv:e,_int:r}=Bt,n=`${e.encode(2,r.encode(t.r))}${e.encode(2,r.encode(t.s))}`;return e.encode(48,n)}},vt=BigInt(0),de=BigInt(1),Um=BigInt(2),Yc=BigInt(3),Lm=BigInt(4);function o0(t){let e=t0(t),{Fp:r}=e,n=Lt(e.n,e.nBitLength),o=e.toBytes||((p,d,x)=>{let R=d.toAffine();return pt(Uint8Array.from([4]),r.toBytes(R.x),r.toBytes(R.y))}),i=e.fromBytes||(p=>{let d=p.subarray(1),x=r.fromBytes(d.subarray(0,r.BYTES)),R=r.fromBytes(d.subarray(r.BYTES,2*r.BYTES));return{x,y:R}});function s(p){let{a:d,b:x}=e,R=r.sqr(p),b=r.mul(R,p);return r.add(r.add(b,r.mul(p,d)),x)}if(!r.eql(r.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function a(p){return Wr(p,de,e.n)}function c(p){let{allowedPrivateKeyLengths:d,nByteLength:x,wrapPrivateKey:R,n:b}=e;if(d&&typeof p!="bigint"){if(Nt(p)&&(p=ht(p)),typeof p!="string"||!d.includes(p.length))throw new Error("Invalid key");p=p.padStart(x*2,"0")}let I;try{I=typeof p=="bigint"?p:dt(ie("private key",p,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof p}`)}return R&&(I=X(I,b)),Ie("private key",I,de,b),I}function f(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}let u=Xt((p,d)=>{let{px:x,py:R,pz:b}=p;if(r.eql(b,r.ONE))return{x,y:R};let I=p.is0();d==null&&(d=I?r.ONE:r.inv(b));let O=r.mul(x,d),V=r.mul(R,d),N=r.mul(b,d);if(I)return{x:r.ZERO,y:r.ZERO};if(!r.eql(N,r.ONE))throw new Error("invZ was invalid");return{x:O,y:V}}),l=Xt(p=>{if(p.is0()){if(e.allowInfinityPoint&&!r.is0(p.py))return;throw new Error("bad point: ZERO")}let{x:d,y:x}=p.toAffine();if(!r.isValid(d)||!r.isValid(x))throw new Error("bad point: x or y not FE");let R=r.sqr(x),b=s(d);if(!r.eql(R,b))throw new Error("bad point: equation left != right");if(!p.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(d,x,R){if(this.px=d,this.py=x,this.pz=R,d==null||!r.isValid(d))throw new Error("x required");if(x==null||!r.isValid(x))throw new Error("y required");if(R==null||!r.isValid(R))throw new Error("z required");Object.freeze(this)}static fromAffine(d){let{x,y:R}=d||{};if(!d||!r.isValid(x)||!r.isValid(R))throw new Error("invalid affine point");if(d instanceof h)throw new Error("projective point not allowed");let b=I=>r.eql(I,r.ZERO);return b(x)&&b(R)?h.ZERO:new h(x,R,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(d){let x=r.invertBatch(d.map(R=>R.pz));return d.map((R,b)=>R.toAffine(x[b])).map(h.fromAffine)}static fromHex(d){let x=h.fromAffine(i(ie("pointHex",d)));return x.assertValidity(),x}static fromPrivateKey(d){return h.BASE.multiply(c(d))}static msm(d,x){return Fn(h,n,d,x)}_setWindowSize(d){v.setWindowSize(this,d)}assertValidity(){l(this)}hasEvenY(){let{y:d}=this.toAffine();if(r.isOdd)return!r.isOdd(d);throw new Error("Field doesn't support isOdd")}equals(d){f(d);let{px:x,py:R,pz:b}=this,{px:I,py:O,pz:V}=d,N=r.eql(r.mul(x,V),r.mul(I,b)),w=r.eql(r.mul(R,V),r.mul(O,b));return N&&w}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){let{a:d,b:x}=e,R=r.mul(x,Yc),{px:b,py:I,pz:O}=this,V=r.ZERO,N=r.ZERO,w=r.ZERO,E=r.mul(b,b),F=r.mul(I,I),_=r.mul(O,O),T=r.mul(b,I);return T=r.add(T,T),w=r.mul(b,O),w=r.add(w,w),V=r.mul(d,w),N=r.mul(R,_),N=r.add(V,N),V=r.sub(F,N),N=r.add(F,N),N=r.mul(V,N),V=r.mul(T,V),w=r.mul(R,w),_=r.mul(d,_),T=r.sub(E,_),T=r.mul(d,T),T=r.add(T,w),w=r.add(E,E),E=r.add(w,E),E=r.add(E,_),E=r.mul(E,T),N=r.add(N,E),_=r.mul(I,O),_=r.add(_,_),E=r.mul(_,T),V=r.sub(V,E),w=r.mul(_,F),w=r.add(w,w),w=r.add(w,w),new h(V,N,w)}add(d){f(d);let{px:x,py:R,pz:b}=this,{px:I,py:O,pz:V}=d,N=r.ZERO,w=r.ZERO,E=r.ZERO,F=e.a,_=r.mul(e.b,Yc),T=r.mul(x,I),K=r.mul(R,O),S=r.mul(b,V),k=r.add(x,R),m=r.add(I,O);k=r.mul(k,m),m=r.add(T,K),k=r.sub(k,m),m=r.add(x,b);let g=r.add(I,V);return m=r.mul(m,g),g=r.add(T,S),m=r.sub(m,g),g=r.add(R,b),N=r.add(O,V),g=r.mul(g,N),N=r.add(K,S),g=r.sub(g,N),E=r.mul(F,m),N=r.mul(_,S),E=r.add(N,E),N=r.sub(K,E),E=r.add(K,E),w=r.mul(N,E),K=r.add(T,T),K=r.add(K,T),S=r.mul(F,S),m=r.mul(_,m),K=r.add(K,S),S=r.sub(T,S),S=r.mul(F,S),m=r.add(m,S),T=r.mul(K,m),w=r.add(w,T),T=r.mul(g,m),N=r.mul(k,N),N=r.sub(N,T),T=r.mul(k,K),E=r.mul(g,E),E=r.add(E,T),new h(N,w,E)}subtract(d){return this.add(d.negate())}is0(){return this.equals(h.ZERO)}wNAF(d){return v.wNAFCached(this,d,h.normalizeZ)}multiplyUnsafe(d){Ie("scalar",d,vt,e.n);let x=h.ZERO;if(d===vt)return x;if(d===de)return this;let{endo:R}=e;if(!R)return v.unsafeLadder(this,d);let{k1neg:b,k1:I,k2neg:O,k2:V}=R.splitScalar(d),N=x,w=x,E=this;for(;I>vt||V>vt;)I&de&&(N=N.add(E)),V&de&&(w=w.add(E)),E=E.double(),I>>=de,V>>=de;return b&&(N=N.negate()),O&&(w=w.negate()),w=new h(r.mul(w.px,R.beta),w.py,w.pz),N.add(w)}multiply(d){let{endo:x,n:R}=e;Ie("scalar",d,de,R);let b,I;if(x){let{k1neg:O,k1:V,k2neg:N,k2:w}=x.splitScalar(d),{p:E,f:F}=this.wNAF(V),{p:_,f:T}=this.wNAF(w);E=v.constTimeNegate(O,E),_=v.constTimeNegate(N,_),_=new h(r.mul(_.px,x.beta),_.py,_.pz),b=E.add(_),I=F.add(T)}else{let{p:O,f:V}=this.wNAF(d);b=O,I=V}return h.normalizeZ([b,I])[0]}multiplyAndAddUnsafe(d,x,R){let b=h.BASE,I=(V,N)=>N===vt||N===de||!V.equals(b)?V.multiplyUnsafe(N):V.multiply(N),O=I(this,x).add(I(d,R));return O.is0()?void 0:O}toAffine(d){return u(this,d)}isTorsionFree(){let{h:d,isTorsionFree:x}=e;if(d===de)return!0;if(x)return x(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:d,clearCofactor:x}=e;return d===de?this:x?x(h,this):this.multiplyUnsafe(e.h)}toRawBytes(d=!0){return Ge("isCompressed",d),this.assertValidity(),o(h,this,d)}toHex(d=!0){return Ge("isCompressed",d),ht(this.toRawBytes(d))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);let B=e.nBitLength,v=On(h,e.endo?Math.ceil(B/2):B);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:a}}function i0(t){let e=Xr(t);return rt(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Zc(t){let e=i0(t),{Fp:r,n}=e,o=r.BYTES+1,i=2*r.BYTES+1;function s(S){return X(S,n)}function a(S){return Dn(S,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:l}=o0({...e,toBytes(S,k,m){let g=k.toAffine(),A=r.toBytes(g.x),D=pt;return Ge("isCompressed",m),m?D(Uint8Array.from([k.hasEvenY()?2:3]),A):D(Uint8Array.from([4]),A,r.toBytes(g.y))},fromBytes(S){let k=S.length,m=S[0],g=S.subarray(1);if(k===o&&(m===2||m===3)){let A=dt(g);if(!Wr(A,de,r.ORDER))throw new Error("Point is not on curve");let D=u(A),M;try{M=r.sqrt(D)}catch(Y){let G=Y instanceof Error?": "+Y.message:"";throw new Error("Point is not on curve"+G)}let H=(M&de)===de;return(m&1)===1!==H&&(M=r.neg(M)),{x:A,y:M}}else if(k===i&&m===4){let A=r.fromBytes(g.subarray(0,r.BYTES)),D=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:A,y:D}}else throw new Error(`Point of length ${k} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),h=S=>ht(Ut(S,e.nByteLength));function B(S){let k=n>>de;return S>k}function v(S){return B(S)?s(-S):S}let p=(S,k,m)=>dt(S.slice(k,m));class d{constructor(k,m,g){this.r=k,this.s=m,this.recovery=g,this.assertValidity()}static fromCompact(k){let m=e.nByteLength;return k=ie("compactSignature",k,m*2),new d(p(k,0,m),p(k,m,2*m))}static fromDER(k){let{r:m,s:g}=Bt.toSig(ie("DER",k));return new d(m,g)}assertValidity(){Ie("r",this.r,de,n),Ie("s",this.s,de,n)}addRecoveryBit(k){return new d(this.r,this.s,k)}recoverPublicKey(k){let{r:m,s:g,recovery:A}=this,D=V(ie("msgHash",k));if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");let M=A===2||A===3?m+e.n:m;if(M>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let H=A&1?"03":"02",z=c.fromHex(H+h(M)),Y=a(M),G=s(-D*Y),J=s(g*Y),Q=c.BASE.multiplyAndAddUnsafe(z,G,J);if(!Q)throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Wt(this.toDERHex())}toDERHex(){return Bt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Wt(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}let x={isValidPrivateKey(S){try{return f(S),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let S=Di(e.n);return Ia(e.randomBytes(S),e.n)},precompute(S=8,k=c.BASE){return k._setWindowSize(S),k.multiply(BigInt(3)),k}};function R(S,k=!0){return c.fromPrivateKey(S).toRawBytes(k)}function b(S){let k=Nt(S),m=typeof S=="string",g=(k||m)&&S.length;return k?g===o||g===i:m?g===2*o||g===2*i:S instanceof c}function I(S,k,m=!0){if(b(S))throw new Error("first arg must be private key");if(!b(k))throw new Error("second arg must be public key");return c.fromHex(k).multiply(f(S)).toRawBytes(m)}let O=e.bits2int||function(S){let k=dt(S),m=S.length*8-e.nBitLength;return m>0?k>>BigInt(m):k},V=e.bits2int_modN||function(S){return s(O(S))},N=Jr(e.nBitLength);function w(S){return Ie(`num < 2^${e.nBitLength}`,S,vt,N),Ut(S,e.nByteLength)}function E(S,k,m=F){if(["recovered","canonical"].some(le=>le in m))throw new Error("sign() legacy options not supported");let{hash:g,randomBytes:A}=e,{lowS:D,prehash:M,extraEntropy:H}=m;D==null&&(D=!0),S=ie("msgHash",S),jc(m),M&&(S=ie("prehashed msgHash",g(S)));let z=V(S),Y=f(k),G=[w(Y),w(z)];if(H!=null&&H!==!1){let le=H===!0?A(r.BYTES):H;G.push(ie("extraEntropy",le))}let J=pt(...G),Q=z;function ue(le){let ge=O(le);if(!l(ge))return;let ve=a(ge),ae=c.BASE.multiply(ge).toAffine(),Re=s(ae.x);if(Re===vt)return;let ut=s(ve*s(Q+Re*Y));if(ut===vt)return;let $r=(ae.x===Re?0:2)|Number(ae.y&de),qr=ut;return D&&B(ut)&&(qr=v(ut),$r^=1),new d(Re,qr,$r)}return{seed:J,k2sig:ue}}let F={lowS:e.lowS,prehash:!1},_={lowS:e.lowS,prehash:!1};function T(S,k,m=F){let{seed:g,k2sig:A}=E(S,k,m),D=e;return _i(D.hash.outputLen,D.nByteLength,D.hmac)(g,A)}c.BASE._setWindowSize(8);function K(S,k,m,g=_){let A=S;if(k=ie("msgHash",k),m=ie("publicKey",m),"strict"in g)throw new Error("options.strict was renamed to lowS");jc(g);let{lowS:D,prehash:M}=g,H,z;try{if(typeof A=="string"||Nt(A))try{H=d.fromDER(A)}catch(ae){if(!(ae instanceof Bt.Err))throw ae;H=d.fromCompact(A)}else if(typeof A=="object"&&typeof A.r=="bigint"&&typeof A.s=="bigint"){let{r:ae,s:Re}=A;H=new d(ae,Re)}else throw new Error("PARSE");z=c.fromHex(m)}catch(ae){if(ae.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(D&&H.hasHighS())return!1;M&&(k=e.hash(k));let{r:Y,s:G}=H,J=V(k),Q=a(G),ue=s(J*Q),le=s(Y*Q),ge=c.BASE.multiplyAndAddUnsafe(z,ue,le)?.toAffine();return ge?s(ge.x)===Y:!1}return{CURVE:e,getPublicKey:R,getSharedSecret:I,sign:T,verify:K,ProjectivePoint:c,Signature:d,utils:x}}function s0(t){return{hash:t,hmac:(e,...r)=>on(t,e,Ai(...r)),randomBytes:br}}function Wc(t,e){let r=n=>Zc({...t,...s0(n)});return Object.freeze({...r(e),create:r})}var Qc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Jc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),a0=BigInt(1),fs=BigInt(2),Xc=(t,e)=>(t+e/fs)/e;function c0(t){let e=Qc,r=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),f=t*t*t%e,u=f*f*t%e,l=te(u,r,e)*u%e,h=te(l,r,e)*u%e,B=te(h,fs,e)*f%e,v=te(B,o,e)*B%e,p=te(v,i,e)*v%e,d=te(p,a,e)*p%e,x=te(d,c,e)*d%e,R=te(x,a,e)*p%e,b=te(R,r,e)*u%e,I=te(b,s,e)*v%e,O=te(I,n,e)*f%e,V=te(O,fs,e);if(!hs.eql(hs.sqr(V),t))throw new Error("Cannot find square root");return V}var hs=Lt(Qc,void 0,void 0,{sqrt:c0}),Je=Wc({a:BigInt(0),b:BigInt(7),Fp:hs,n:Jc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=Jc,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-a0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,s=BigInt("0x100000000000000000000000000000000"),a=Xc(i*t,e),c=Xc(-n*t,e),f=X(t-a*r-c*o,e),u=X(-a*n-c*i,e),l=f>s,h=u>s;if(l&&(f=e-f),h&&(u=e-u),f>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:f,k2neg:h,k2:u}}}},Gc),$m=BigInt(0);var qm=Je.ProjectivePoint;function eu(){return Je.utils.randomPrivateKey()}function tu(t,e){let r=me.digest(e instanceof Uint8Array?e:e.subarray());if(He(r))return r.then(({digest:n})=>Je.sign(n,t).toDERRawBytes()).catch(n=>{throw new q(String(n),"ERR_INVALID_INPUT")});try{return Je.sign(r.digest,t).toDERRawBytes()}catch(n){throw new q(String(n),"ERR_INVALID_INPUT")}}function ru(t,e,r){let n=me.digest(r instanceof Uint8Array?r:r.subarray());if(He(n))return n.then(({digest:o})=>Je.verify(e,o,t)).catch(o=>{throw new q(String(o),"ERR_INVALID_INPUT")});try{return Je.verify(e,n.digest,t)}catch(o){throw new q(String(o),"ERR_INVALID_INPUT")}}function nu(t){return Je.ProjectivePoint.fromHex(t).toRawBytes(!0)}function ou(t){try{Je.getPublicKey(t,!0)}catch(e){throw new q(String(e),"ERR_INVALID_PRIVATE_KEY")}}function ds(t){try{Je.ProjectivePoint.fromHex(t)}catch(e){throw new q(String(e),"ERR_INVALID_PUBLIC_KEY")}}function iu(t){try{return Je.getPublicKey(t,!0)}catch(e){throw new q(String(e),"ERR_INVALID_PRIVATE_KEY")}}var mn=class{_key;constructor(e){ds(e),this._key=e}verify(e,r){return ru(this._key,r,e)}marshal(){return nu(this._key)}get bytes(){return nt.encode({Type:re.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return be(this.bytes,e.bytes)}async hash(){let e=me.digest(this.bytes),r;return He(e)?{bytes:r}=await e:r=e.bytes,r}},bn=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r??iu(e),ou(this._key),ds(this._publicKey)}sign(e){return tu(this._key,e)}get public(){return new mn(this._publicKey)}marshal(){return this._key}get bytes(){return ot.encode({Type:re.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return be(this.bytes,e.bytes)}hash(){let e=me.digest(this.bytes);return He(e)?e.then(({bytes:r})=>r):e.bytes}async id(){let e=await this.public.hash();return ne(e,"base58btc")}async export(e,r="libp2p-key"){if(r==="libp2p-key")return vr(this.bytes,e);throw new q(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function l0(t){return new bn(t)}function f0(t){return new mn(t)}async function h0(){let t=eu();return new bn(t)}var ir={rsa:us,ed25519:Qi,secp256k1:ps};function su(t){let e=Object.keys(ir).join(" / ");return new q(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function gs(t){let e=nt.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case re.RSA:return ir.rsa.unmarshalRsaPublicKey(r);case re.Ed25519:return ir.ed25519.unmarshalEd25519PublicKey(r);case re.Secp256k1:return ir.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw su(e.Type??"unknown")}}async function au(t){let e=ot.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case re.RSA:return ir.rsa.unmarshalRsaPrivateKey(r);case re.Ed25519:return ir.ed25519.unmarshalEd25519PrivateKey(r);case re.Secp256k1:return ir.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw su(e.Type??"RSA")}}function d0(t,e){try{if(typeof t=="string"&&t.length>0)return p0(t);if(typeof t=="number"&&isFinite(t))return e?.long?y0(t):g0(t);throw new Error("Value is not a string or number.")}catch(r){let n=m0(r)?`${r.message}. value=${JSON.stringify(t)}`:"An unknown error has occured.";throw new Error(n)}}function p0(t){if(t=String(t),t.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");let e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return NaN;let r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*315576e5;case"weeks":case"week":case"w":return r*6048e5;case"days":case"day":case"d":return r*864e5;case"hours":case"hour":case"hrs":case"hr":case"h":return r*36e5;case"minutes":case"minute":case"mins":case"min":case"m":return r*6e4;case"seconds":case"second":case"secs":case"sec":case"s":return r*1e3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}var Oo=d0;function g0(t){let e=Math.abs(t);return e>=864e5?`${Math.round(t/864e5)}d`:e>=36e5?`${Math.round(t/36e5)}h`:e>=6e4?`${Math.round(t/6e4)}m`:e>=1e3?`${Math.round(t/1e3)}s`:`${t}ms`}function y0(t){let e=Math.abs(t);return e>=864e5?Do(t,e,864e5,"day"):e>=36e5?Do(t,e,36e5,"hour"):e>=6e4?Do(t,e,6e4,"minute"):e>=1e3?Do(t,e,1e3,"second"):`${t} ms`}function Do(t,e,r,n){let o=e>=r*1.5;return`${Math.round(t/r)} ${n}${o?"s":""}`}function m0(t){return typeof t=="object"&&t!==null&&"message"in t}function ys(t){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=o,r.enabled=s,r.humanize=Oo,r.destroy=f,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let l=0;for(let h=0;h<u.length;h++)l=(l<<5)-l+u.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(u){let l,h=null,B,v;function p(...d){if(!p.enabled)return;let x=p,R=Number(new Date),b=R-(l||R);x.diff=b,x.prev=l,x.curr=R,l=R,d[0]=r.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let I=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(V,N)=>{if(V==="%%")return"%";I++;let w=r.formatters[N];if(typeof w=="function"){let E=d[I];V=w.call(x,E),d.splice(I,1),I--}return V}),r.formatArgs.call(x,d),(x.log||r.log).apply(x,d)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(B!==r.namespaces&&(B=r.namespaces,v=r.enabled(u)),v),set:d=>{h=d}}),typeof r.init=="function"&&r.init(p),p}function n(u,l){let h=r(this.namespace+(typeof l>"u"?":":l)+u);return h.log=this.log,h}function o(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let l,h=(typeof u=="string"?u:"").split(/[\s,]+/),B=h.length;for(l=0;l<B;l++)h[l]&&(u=h[l].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(u))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack??u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var Fo=A0(),b0=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function w0(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function x0(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Oo(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}var E0=console.debug??console.log??(()=>{});function B0(t){try{t?Fo?.setItem("debug",t):Fo?.removeItem("debug")}catch{}}function v0(){let t;try{t=Fo?.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function A0(){try{return localStorage}catch{}}function S0(t){t.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}var cu=ys({formatArgs:x0,save:B0,load:v0,useColors:w0,setupFormatters:S0,colors:b0,storage:Fo,log:E0});var Ue=cu;Ue.formatters.b=t=>t==null?"undefined":ye.baseEncode(t);Ue.formatters.t=t=>t==null?"undefined":Rt.baseEncode(t);Ue.formatters.m=t=>t==null?"undefined":jr.baseEncode(t);Ue.formatters.p=t=>t==null?"undefined":t.toString();Ue.formatters.c=t=>t==null?"undefined":t.toString();Ue.formatters.k=t=>t==null?"undefined":t.toString();Ue.formatters.a=t=>t==null?"undefined":t.toString();function k0(t){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function Mo(t){let e=k0(`${t}:trace`);return Ue.enabled(`${t}:trace`)&&Ue.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=Ue(`${t}:trace`)),Object.assign(Ue(t),{error:Ue(`${t}:error`),trace:e})}var Ds=kn(ms(),1);var At="/",fu=new TextEncoder().encode(At),Ho=fu[0],Po=class t{_buf;constructor(e,r){if(typeof e=="string")this._buf=Z(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Ho)throw new Error("Invalid key")}toString(e="utf8"){return ne(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new t(e.join(At))}static random(){return new t(Math.random().toString().substring(2))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new t(e):typeof e.uint8Array=="function"?new t(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=fu),this._buf[0]!==Ho){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Ho,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Ho;)this._buf=this._buf.subarray(0,-1)}less(e){let r=this.list(),n=e.list();for(let o=0;o<r.length;o++){if(n.length<o+1)return!1;let i=r[o],s=n[o];if(i<s)return!0;if(i>s)return!1}return r.length<n.length}reverse(){return t.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(At).slice(1)}type(){return I0(this.baseNamespace())}name(){return C0(this.baseNamespace())}instance(e){return new t(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(At)||(e+=At),e+=this.type(),new t(e)}parent(){let e=this.list();return e.length===1?new t(At):new t(e.slice(0,-1).join(At))}child(e){return this.toString()===At?e:e.toString()===At?this:new t(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return t.withNamespaces([...this.namespaces(),...T0(e.map(r=>r.namespaces()))])}};function I0(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function C0(t){let e=t.split(":");return e[e.length-1]}function T0(t){return[].concat(...t)}var Os=kn(hu(),1);var ws="ERR_UNRECOGNIZED_VALIDITY",du="ERR_SIGNATURE_CREATION",sr="ERR_SIGNATURE_VERIFICATION";var xs="ERR_UNDEFINED_PARAMETER",pu="ERR_INVALID_RECORD_DATA",gu="ERR_INVALID_VALUE",yu="ERR_INVALID_EMBEDDED_KEY",mu="ERR_MISSING_PRIVATE_KEY";var Le;(function(t){let e;(function(o){o.EOL="EOL"})(e=t.ValidityType||(t.ValidityType={}));let r;(function(o){o[o.EOL=0]="EOL"})(r||(r={})),function(o){o.codec=()=>rn(r)}(e=t.ValidityType||(t.ValidityType={}));let n;t.codec=()=>(n==null&&(n=Rr((o,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),o.value!=null&&(i.uint32(10),i.bytes(o.value)),o.signatureV1!=null&&(i.uint32(18),i.bytes(o.signatureV1)),o.validityType!=null&&(i.uint32(24),t.ValidityType.codec().encode(o.validityType,i)),o.validity!=null&&(i.uint32(34),i.bytes(o.validity)),o.sequence!=null&&(i.uint32(40),i.uint64(o.sequence)),o.ttl!=null&&(i.uint32(48),i.uint64(o.ttl)),o.pubKey!=null&&(i.uint32(58),i.bytes(o.pubKey)),o.signatureV2!=null&&(i.uint32(66),i.bytes(o.signatureV2)),o.data!=null&&(i.uint32(74),i.bytes(o.data)),s.lengthDelimited!==!1&&i.ldelim()},(o,i)=>{let s={},a=i==null?o.len:o.pos+i;for(;o.pos<a;){let c=o.uint32();switch(c>>>3){case 1:s.value=o.bytes();break;case 2:s.signatureV1=o.bytes();break;case 3:s.validityType=t.ValidityType.codec().decode(o);break;case 4:s.validity=o.bytes();break;case 5:s.sequence=o.uint64();break;case 6:s.ttl=o.uint64();break;case 7:s.pubKey=o.bytes();break;case 8:s.signatureV2=o.bytes();break;case 9:s.data=o.bytes();break;default:o.skipType(c&7);break}}return s})),n),t.encode=o=>Sr(o,t.codec()),t.decode=o=>Ar(o,t.codec())})(Le||(Le={}));var xu=Symbol.for("nodejs.util.inspect.custom"),wu=Object.values(hr).map(t=>t.decoder).reduce((t,e)=>t.or(e),hr.identity.decoder),Eu=114,vs=36,As=37,wn=class{type;multihash;privateKey;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[Rn]=!0;toString(){return this.string==null&&(this.string=ye.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return Me.createV1(Eu,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e==null)return!1;if(e instanceof Uint8Array)return be(this.multihash.bytes,e);if(typeof e=="string")return N0(e).equals(this);if(e?.multihash?.bytes!=null)return be(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[xu](){return`PeerId(${this.toString()})`}},Lr=class extends wn{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}},Vr=class extends wn{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.multihash.digest}},Dr=class extends wn{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.multihash.digest}},Es=2336,Bs=class{type="url";multihash;privateKey;publicKey;url;constructor(e){this.url=e.toString(),this.multihash=qe.digest(Z(this.url))}[xu](){return`PeerId(${this.url})`}[Rn]=!0;toString(){return this.toCID().toString()}toCID(){return Me.createV1(Es,this.multihash)}toBytes(){return this.toCID().bytes}equals(e){return e==null?!1:(e instanceof Uint8Array&&(e=ne(e)),e.toString()===this.toString())}};function N0(t,e){if(e=e??wu,t.charAt(0)==="1"||t.charAt(0)==="Q"){let r=zt(ye.decode(`z${t}`));return t.startsWith("12D")?new Vr({multihash:r}):t.startsWith("16U")?new Dr({multihash:r}):new Lr({multihash:r})}return Ss(wu.decode(t))}function Ss(t){try{let e=zt(t);if(e.code===qe.code){if(e.digest.length===vs)return new Vr({multihash:e});if(e.digest.length===As)return new Dr({multihash:e})}if(e.code===me.code)return new Lr({multihash:e})}catch{return _0(Me.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function _0(t){if(t?.multihash==null||t.version==null||t.version===1&&t.code!==Eu&&t.code!==Es)throw new Error("Supplied PeerID CID is invalid");if(t.code===Es){let r=ne(t.multihash.digest);return new Bs(new URL(r))}let e=t.multihash;if(e.code===me.code)return new Lr({multihash:t.multihash});if(e.code===qe.code){if(e.digest.length===vs)return new Vr({multihash:t.multihash});if(e.digest.length===As)return new Dr({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Bu(t,e){return t.length===vs?new Vr({multihash:et(qe.code,t),privateKey:e}):t.length===As?new Dr({multihash:et(qe.code,t),privateKey:e}):new Lr({multihash:await me.digest(t),publicKey:t,privateKey:e})}var U0=["string","number","bigint","symbol"],L0=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function vu(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(U0.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(V0(t))return"Buffer";let r=D0(t);return r||"Object"}function V0(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function D0(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(L0.includes(e))return e}var y=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};y.uint=new y(0,"uint",!0);y.negint=new y(1,"negint",!0);y.bytes=new y(2,"bytes",!0);y.string=new y(3,"string",!0);y.array=new y(4,"array",!1);y.map=new y(5,"map",!1);y.tag=new y(6,"tag",!1);y.float=new y(7,"float",!0);y.false=new y(7,"false",!0);y.true=new y(7,"true",!0);y.null=new y(7,"null",!0);y.undefined=new y(7,"undefined",!0);y.break=new y(7,"break",!0);var L=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Or=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",O0=new TextDecoder,F0=new TextEncoder;function Ko(t){return Or&&globalThis.Buffer.isBuffer(t)}function ks(t){return t instanceof Uint8Array?Ko(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var Ru=Or?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Su(t,e,r):(t,e,r)=>r-e>64?O0.decode(t.subarray(e,r)):Su(t,e,r),Iu=Or?t=>t.length>64?globalThis.Buffer.from(t):Au(t):t=>t.length>64?F0.encode(t):Au(t),ct=t=>Uint8Array.from(t),Fr=Or?(t,e,r)=>Ko(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Cu=Or?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),ks(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let o of t)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},Tu=Or?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Nu(t,e){if(Ko(t)&&Ko(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function Au(t){let e=[],r=0;for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);o<128?e[r++]=o:o<2048?(e[r++]=o>>6|192,e[r++]=o&63|128):(o&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=o>>18|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128,e[r++]=o&63|128):(e[r++]=o>>12|224,e[r++]=o>>6&63|128,e[r++]=o&63|128)}return e}function Su(t,e,r){let n=[];for(;e<r;){let o=t[e],i=null,s=o>239?4:o>223?3:o>191?2:1;if(e+s<=r){let a,c,f,u;switch(s){case 1:o<128&&(i=o);break;case 2:a=t[e+1],(a&192)===128&&(u=(o&31)<<6|a&63,u>127&&(i=u));break;case 3:a=t[e+1],c=t[e+2],(a&192)===128&&(c&192)===128&&(u=(o&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:a=t[e+1],c=t[e+2],f=t[e+3],(a&192)===128&&(c&192)===128&&(f&192)===128&&(u=(o&15)<<18|(a&63)<<12|(c&63)<<6|f&63,u>65535&&u<1114112&&(i=u))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),e+=s}return M0(n)}var ku=4096;function M0(t){let e=t.length;if(e<=ku)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=ku));return r}var H0=256,xn=class{constructor(e=H0){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(e,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=Tu(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Fr(n,0,this.cursor)}else r=Cu(this.chunks,this.cursor);return e&&this.reset(),r}};var P="CBOR decode error:",Rs="CBOR encode error:",En=[];En[23]=1;En[24]=2;En[25]=3;En[26]=5;En[27]=9;function St(t,e,r){if(t.length-e<r)throw new Error(`${P} not enough data for type`)}var pe=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Ve(t,e,r){St(t,e,1);let n=t[e];if(r.strict===!0&&n<pe[0])throw new Error(`${P} integer encoded in more bytes than necessary (strict decode)`);return n}function De(t,e,r){St(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<pe[1])throw new Error(`${P} integer encoded in more bytes than necessary (strict decode)`);return n}function Oe(t,e,r){St(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<pe[2])throw new Error(`${P} integer encoded in more bytes than necessary (strict decode)`);return n}function Fe(t,e,r){St(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&i<pe[3])throw new Error(`${P} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(r.allowBigInt===!0)return i;throw new Error(`${P} integers outside of the safe integer range are not supported`)}function _u(t,e,r,n){return new L(y.uint,Ve(t,e+1,n),2)}function Uu(t,e,r,n){return new L(y.uint,De(t,e+1,n),3)}function Lu(t,e,r,n){return new L(y.uint,Oe(t,e+1,n),5)}function Vu(t,e,r,n){return new L(y.uint,Fe(t,e+1,n),9)}function Ke(t,e){return xe(t,0,e.value)}function xe(t,e,r){if(r<pe[0]){let n=Number(r);t.push([e|n])}else if(r<pe[1]){let n=Number(r);t.push([e|24,n])}else if(r<pe[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<pe[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<pe[4]){let o=[e|27,0,0,0,0,0,0,0],i=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,t.push(o)}else throw new Error(`${P} encountered BigInt larger than allowable range`)}}Ke.encodedSize=function(e){return xe.encodedSize(e.value)};xe.encodedSize=function(e){return e<pe[0]?1:e<pe[1]?2:e<pe[2]?3:e<pe[3]?5:9};Ke.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function Du(t,e,r,n){return new L(y.negint,-1-Ve(t,e+1,n),2)}function Ou(t,e,r,n){return new L(y.negint,-1-De(t,e+1,n),3)}function Fu(t,e,r,n){return new L(y.negint,-1-Oe(t,e+1,n),5)}var Is=BigInt(-1),Mu=BigInt(1);function Hu(t,e,r,n){let o=Fe(t,e+1,n);if(typeof o!="bigint"){let i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new L(y.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${P} integers outside of the safe integer range are not supported`);return new L(y.negint,Is-BigInt(o),9)}function $o(t,e){let r=e.value,n=typeof r=="bigint"?r*Is-Mu:r*-1-1;xe(t,e.type.majorEncoded,n)}$o.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*Is-Mu:r*-1-1;return n<pe[0]?1:n<pe[1]?2:n<pe[2]?3:n<pe[3]?5:9};$o.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function Bn(t,e,r,n){St(t,e,r+n);let o=Fr(t,e+r,e+r+n);return new L(y.bytes,o,r+n)}function Pu(t,e,r,n){return Bn(t,e,1,r)}function Ku(t,e,r,n){return Bn(t,e,2,Ve(t,e+1,n))}function $u(t,e,r,n){return Bn(t,e,3,De(t,e+1,n))}function qu(t,e,r,n){return Bn(t,e,5,Oe(t,e+1,n))}function zu(t,e,r,n){let o=Fe(t,e+1,n);if(typeof o=="bigint")throw new Error(`${P} 64-bit integer bytes lengths not supported`);return Bn(t,e,9,o)}function qo(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===y.string?Iu(t.value):t.value),t.encodedBytes}function Mr(t,e){let r=qo(e);xe(t,e.type.majorEncoded,r.length),t.push(r)}Mr.encodedSize=function(e){let r=qo(e);return xe.encodedSize(r.length)+r.length};Mr.compareTokens=function(e,r){return K0(qo(e),qo(r))};function K0(t,e){return t.length<e.length?-1:t.length>e.length?1:Nu(t,e)}function vn(t,e,r,n,o){let i=r+n;St(t,e,i);let s=new L(y.string,Ru(t,e+r,e+i),i);return o.retainStringBytes===!0&&(s.byteValue=Fr(t,e+r,e+i)),s}function Gu(t,e,r,n){return vn(t,e,1,r,n)}function ju(t,e,r,n){return vn(t,e,2,Ve(t,e+1,n),n)}function Yu(t,e,r,n){return vn(t,e,3,De(t,e+1,n),n)}function Zu(t,e,r,n){return vn(t,e,5,Oe(t,e+1,n),n)}function Wu(t,e,r,n){let o=Fe(t,e+1,n);if(typeof o=="bigint")throw new Error(`${P} 64-bit integer string lengths not supported`);return vn(t,e,9,o,n)}var Ju=Mr;function Hr(t,e,r,n){return new L(y.array,n,r)}function Xu(t,e,r,n){return Hr(t,e,1,r)}function Qu(t,e,r,n){return Hr(t,e,2,Ve(t,e+1,n))}function el(t,e,r,n){return Hr(t,e,3,De(t,e+1,n))}function tl(t,e,r,n){return Hr(t,e,5,Oe(t,e+1,n))}function rl(t,e,r,n){let o=Fe(t,e+1,n);if(typeof o=="bigint")throw new Error(`${P} 64-bit integer array lengths not supported`);return Hr(t,e,9,o)}function nl(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${P} indefinite length items not allowed`);return Hr(t,e,1,1/0)}function zo(t,e){xe(t,y.array.majorEncoded,e.value)}zo.compareTokens=Ke.compareTokens;zo.encodedSize=function(e){return xe.encodedSize(e.value)};function Pr(t,e,r,n){return new L(y.map,n,r)}function ol(t,e,r,n){return Pr(t,e,1,r)}function il(t,e,r,n){return Pr(t,e,2,Ve(t,e+1,n))}function sl(t,e,r,n){return Pr(t,e,3,De(t,e+1,n))}function al(t,e,r,n){return Pr(t,e,5,Oe(t,e+1,n))}function cl(t,e,r,n){let o=Fe(t,e+1,n);if(typeof o=="bigint")throw new Error(`${P} 64-bit integer map lengths not supported`);return Pr(t,e,9,o)}function ul(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${P} indefinite length items not allowed`);return Pr(t,e,1,1/0)}function Go(t,e){xe(t,y.map.majorEncoded,e.value)}Go.compareTokens=Ke.compareTokens;Go.encodedSize=function(e){return xe.encodedSize(e.value)};function ll(t,e,r,n){return new L(y.tag,r,1)}function fl(t,e,r,n){return new L(y.tag,Ve(t,e+1,n),2)}function hl(t,e,r,n){return new L(y.tag,De(t,e+1,n),3)}function dl(t,e,r,n){return new L(y.tag,Oe(t,e+1,n),5)}function pl(t,e,r,n){return new L(y.tag,Fe(t,e+1,n),9)}function jo(t,e){xe(t,y.tag.majorEncoded,e.value)}jo.compareTokens=Ke.compareTokens;jo.encodedSize=function(e){return xe.encodedSize(e.value)};var Y0=20,Z0=21,W0=22,J0=23;function gl(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${P} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new L(y.null,null,1):new L(y.undefined,void 0,1)}function yl(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${P} indefinite length items not allowed`);return new L(y.break,void 0,1)}function Cs(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${P} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${P} Infinity values are not supported`)}return new L(y.float,t,e)}function ml(t,e,r,n){return Cs(Ts(t,e+1),3,n)}function bl(t,e,r,n){return Cs(Ns(t,e+1),5,n)}function wl(t,e,r,n){return Cs(vl(t,e+1),9,n)}function Yo(t,e,r){let n=e.value;if(n===!1)t.push([y.float.majorEncoded|Y0]);else if(n===!0)t.push([y.float.majorEncoded|Z0]);else if(n===null)t.push([y.float.majorEncoded|W0]);else if(n===void 0)t.push([y.float.majorEncoded|J0]);else{let o,i=!1;(!r||r.float64!==!0)&&(El(n),o=Ts(Xe,1),n===o||Number.isNaN(n)?(Xe[0]=249,t.push(Xe.slice(0,3)),i=!0):(Bl(n),o=Ns(Xe,1),n===o&&(Xe[0]=250,t.push(Xe.slice(0,5)),i=!0))),i||(X0(n),o=vl(Xe,1),Xe[0]=251,t.push(Xe.slice(0,9)))}}Yo.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){El(n);let o=Ts(Xe,1);if(n===o||Number.isNaN(n))return 3;if(Bl(n),o=Ns(Xe,1),n===o)return 5}return 9};var xl=new ArrayBuffer(9),$e=new DataView(xl,1),Xe=new Uint8Array(xl,0);function El(t){if(t===1/0)$e.setUint16(0,31744,!1);else if(t===-1/0)$e.setUint16(0,64512,!1);else if(Number.isNaN(t))$e.setUint16(0,32256,!1);else{$e.setFloat32(0,t);let e=$e.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)$e.setUint16(0,31744,!1);else if(r===0)$e.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?$e.setUint16(0,0):o<-14?$e.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):$e.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Ts(t,e){if(t.length-e<2)throw new Error(`${P} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,r&32768?-i:i}function Bl(t){$e.setFloat32(0,t,!1)}function Ns(t,e){if(t.length-e<4)throw new Error(`${P} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function X0(t){$e.setFloat64(0,t,!1)}function vl(t,e){if(t.length-e<8)throw new Error(`${P} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}Yo.compareTokens=Ke.compareTokens;function W(t,e,r){throw new Error(`${P} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function Zo(t){return()=>{throw new Error(`${P} ${t}`)}}var C=[];for(let t=0;t<=23;t++)C[t]=W;C[24]=_u;C[25]=Uu;C[26]=Lu;C[27]=Vu;C[28]=W;C[29]=W;C[30]=W;C[31]=W;for(let t=32;t<=55;t++)C[t]=W;C[56]=Du;C[57]=Ou;C[58]=Fu;C[59]=Hu;C[60]=W;C[61]=W;C[62]=W;C[63]=W;for(let t=64;t<=87;t++)C[t]=Pu;C[88]=Ku;C[89]=$u;C[90]=qu;C[91]=zu;C[92]=W;C[93]=W;C[94]=W;C[95]=Zo("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)C[t]=Gu;C[120]=ju;C[121]=Yu;C[122]=Zu;C[123]=Wu;C[124]=W;C[125]=W;C[126]=W;C[127]=Zo("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)C[t]=Xu;C[152]=Qu;C[153]=el;C[154]=tl;C[155]=rl;C[156]=W;C[157]=W;C[158]=W;C[159]=nl;for(let t=160;t<=183;t++)C[t]=ol;C[184]=il;C[185]=sl;C[186]=al;C[187]=cl;C[188]=W;C[189]=W;C[190]=W;C[191]=ul;for(let t=192;t<=215;t++)C[t]=ll;C[216]=fl;C[217]=hl;C[218]=dl;C[219]=pl;C[220]=W;C[221]=W;C[222]=W;C[223]=W;for(let t=224;t<=243;t++)C[t]=Zo("simple values are not supported");C[244]=W;C[245]=W;C[246]=W;C[247]=gl;C[248]=Zo("simple values are not supported");C[249]=ml;C[250]=bl;C[251]=wl;C[252]=W;C[253]=W;C[254]=W;C[255]=yl;var Qe=[];for(let t=0;t<24;t++)Qe[t]=new L(y.uint,t,1);for(let t=-1;t>=-24;t--)Qe[31-t]=new L(y.negint,t,1);Qe[64]=new L(y.bytes,new Uint8Array(0),1);Qe[96]=new L(y.string,"",1);Qe[128]=new L(y.array,0,1);Qe[160]=new L(y.map,0,1);Qe[244]=new L(y.false,!1,1);Qe[245]=new L(y.true,!0,1);Qe[246]=new L(y.null,null,1);function Al(t){switch(t.type){case y.false:return ct([244]);case y.true:return ct([245]);case y.null:return ct([246]);case y.bytes:return t.value.length?void 0:ct([64]);case y.string:return t.value===""?ct([96]):void 0;case y.array:return t.value===0?ct([128]):void 0;case y.map:return t.value===0?ct([160]):void 0;case y.uint:return t.value<24?ct([Number(t.value)]):void 0;case y.negint:if(t.value>=-24)return ct([31-Number(t.value)])}}var ep={float64:!1,mapSorter:np,quickEncodeToken:Al};function tp(){let t=[];return t[y.uint.major]=Ke,t[y.negint.major]=$o,t[y.bytes.major]=Mr,t[y.string.major]=Ju,t[y.array.major]=zo,t[y.map.major]=Go,t[y.tag.major]=jo,t[y.float.major]=Yo,t}var Sl=tp(),_s=new xn,Jo=class t{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${Rs} object contains circular references`);return new t(r,e)}},$t={null:new L(y.null,null),undefined:new L(y.undefined,void 0),true:new L(y.true,!0),false:new L(y.false,!1),emptyArray:new L(y.array,0),emptyMap:new L(y.map,0)},qt={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new L(y.float,t):t>=0?new L(y.uint,t):new L(y.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new L(y.uint,t):new L(y.negint,t)},Uint8Array(t,e,r,n){return new L(y.bytes,t)},string(t,e,r,n){return new L(y.string,t)},boolean(t,e,r,n){return t?$t.true:$t.false},null(t,e,r,n){return $t.null},undefined(t,e,r,n){return $t.undefined},ArrayBuffer(t,e,r,n){return new L(y.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new L(y.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[$t.emptyArray,new L(y.break)]:$t.emptyArray;n=Jo.createCheck(n,t);let o=[],i=0;for(let s of t)o[i++]=Wo(s,r,n);return r.addBreakTokens?[new L(y.array,t.length),o,new L(y.break)]:[new L(y.array,t.length),o]},Object(t,e,r,n){let o=e!=="Object",i=o?t.keys():Object.keys(t),s=o?t.size:i.length;if(!s)return r.addBreakTokens===!0?[$t.emptyMap,new L(y.break)]:$t.emptyMap;n=Jo.createCheck(n,t);let a=[],c=0;for(let f of i)a[c++]=[Wo(f,r,n),Wo(o?t.get(f):t[f],r,n)];return rp(a,r),r.addBreakTokens?[new L(y.map,s),a,new L(y.break)]:[new L(y.map,s),a]}};qt.Map=qt.Object;qt.Buffer=qt.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))qt[`${t}Array`]=qt.DataView;function Wo(t,e={},r){let n=vu(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||qt[n];if(typeof o=="function"){let s=o(t,n,e,r);if(s!=null)return s}let i=qt[n];if(!i)throw new Error(`${Rs} unsupported type: ${n}`);return i(t,n,e,r)}function rp(t,e){e.mapSorter&&t.sort(e.mapSorter)}function np(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,i=Sl[o].compareTokens(r,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function kl(t,e,r,n){if(Array.isArray(e))for(let o of e)kl(t,o,r,n);else r[e.type.major](t,e,n)}function op(t,e,r){let n=Wo(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let i=e[n.type.major];if(i.encodedSize){let s=i.encodedSize(n,r),a=new xn(s);if(i(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return ks(a.chunks[0])}}return _s.reset(),kl(_s,n,e,r),_s.toBytes(!0)}function Us(t,e){return e=Object.assign({},ep,e),op(t,Sl,e)}var ip={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Xo=class{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],r=Qe[e];if(r===void 0){let n=C[e];if(!n)throw new Error(`${P} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let o=e&31;r=n(this.data,this._pos,o,this.options)}return this._pos+=r.encodedLength,r}},An=Symbol.for("DONE"),Qo=Symbol.for("BREAK");function sp(t,e,r){let n=[];for(let o=0;o<t.value;o++){let i=Kr(e,r);if(i===Qo){if(t.value===1/0)break;throw new Error(`${P} got unexpected break to lengthed array`)}if(i===An)throw new Error(`${P} found array but not enough entries (got ${o}, expected ${t.value})`);n[o]=i}return n}function ap(t,e,r){let n=r.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let s=0;s<t.value;s++){let a=Kr(e,r);if(a===Qo){if(t.value===1/0)break;throw new Error(`${P} got unexpected break to lengthed map`)}if(a===An)throw new Error(`${P} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${P} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&i.has(a)||!n&&a in o))throw new Error(`${P} found repeat map key "${a}"`);let c=Kr(e,r);if(c===An)throw new Error(`${P} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?i.set(a,c):o[a]=c}return n?i:o}function Kr(t,e){if(t.done())return An;let r=t.next();if(r.type===y.break)return Qo;if(r.type.terminal)return r.value;if(r.type===y.array)return sp(r,t,e);if(r.type===y.map)return ap(r,t,e);if(r.type===y.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=Kr(t,e);return e.tags[r.value](n)}throw new Error(`${P} tag not supported (${r.value})`)}throw new Error("unsupported")}function Rl(t,e){if(!(t instanceof Uint8Array))throw new Error(`${P} data to decode must be a Uint8Array`);e=Object.assign({},ip,e);let r=e.tokenizer||new Xo(t,e),n=Kr(r,e);if(n===An)throw new Error(`${P} did not find any content to decode`);if(n===Qo)throw new Error(`${P} got unexpected break`);return[n,t.subarray(r.pos())]}function Ls(t,e){let[r,n]=Rl(t,e);if(n.length>0)throw new Error(`${P} too many terminals, data makes no sense`);return r}var Ne=kn(ms(),1);var Il=Mo("ipns:utils"),Cl=Z("/ipns/"),up=114,Tl=async(t,e)=>{if(e==null||t==null){let n=new Error("one or more of the provided parameters are not defined");throw Il.error(n),(0,Ne.default)(n,xs)}let r;if(e.pubKey!=null){try{r=gs(e.pubKey)}catch(o){throw Il.error(o),o}if(!(await Bu(e.pubKey)).equals(t))throw(0,Ne.default)(new Error("Embedded public key did not match PeerID"),yu)}else t.publicKey!=null&&(r=gs(t.publicKey));if(r!=null)return r;throw(0,Ne.default)(new Error("no public key is available"),xs)},Nl=(t,e,r)=>{let n=Z(e);return jt([t,r,n])},_l=t=>{let e=Z("ipns-signature:");return jt([e,t])},Ul=t=>"signatureV1"in t?Le.encode({value:Z(t.value),signatureV1:t.signatureV1,validityType:t.validityType,validity:Z(t.validity),sequence:t.sequence,ttl:t.ttl,pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data}):Le.encode({pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data});function Ll(t){let e=Le.decode(t);if(e.sequence!=null&&(e.sequence=BigInt(e.sequence)),e.ttl!=null&&(e.ttl=BigInt(e.ttl)),e.signatureV2==null||e.data==null)throw(0,Ne.default)(new Error("missing data or signatureV2"),sr);let r=Fl(e.data),n=Vs(r.Value),o=ne(r.Validity);if(e.value!=null&&e.signatureV1!=null)return lp(e),{value:n,validityType:Le.ValidityType.EOL,validity:o,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV1:e.signatureV1,signatureV2:e.signatureV2,data:e.data};if(e.signatureV2!=null)return{value:n,validityType:Le.ValidityType.EOL,validity:o,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data};throw new Error("invalid record: does not include signatureV1 or signatureV2")}var Vl=t=>jt([Cl,t.toBytes()]),Dl=t=>Ss(t.slice(Cl.length)),Ol=(t,e,r,n,o)=>{let i;if(e===Le.ValidityType.EOL)i=0;else throw(0,Ne.default)(new Error("Unknown validity type"),ws);return Us({Value:t,Validity:r,ValidityType:i,Sequence:n,TTL:o})},Fl=t=>{let e=Ls(t);if(e.ValidityType===0)e.ValidityType=Le.ValidityType.EOL;else throw(0,Ne.default)(new Error("Unknown validity type"),ws);return Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),e},Vs=t=>{if(t!=null){if(Ys(t))return`/ipns/${t.toCID().toString(Cn)}`;if(t instanceof Uint8Array){let n=ne(t);n.startsWith("/")&&(t=n)}let e=t.toString().trim();if(e.startsWith("/")&&e.length>1)return e;let r=Me.asCID(t);if(r!=null)return r.code===up?`/ipns/${r.toString(Cn)}`:`/ipfs/${r.toV1().toString()}`;try{return t instanceof Uint8Array?`/ipfs/${Me.decode(t).toV1().toString()}`:`/ipfs/${Me.parse(e).toV1().toString()}`}catch{}}throw(0,Ne.default)(new Error("Value must be a valid content path starting with /"),gu)},lp=t=>{if(t.data==null)throw(0,Ne.default)(new Error("Record data is missing"),pu);let e=Fl(t.data);if(!be(e.Value,t.value??new Uint8Array(0)))throw(0,Ne.default)(new Error('Field "value" did not match between protobuf and CBOR'),sr);if(!be(e.Validity,t.validity??new Uint8Array(0)))throw(0,Ne.default)(new Error('Field "validity" did not match between protobuf and CBOR'),sr);if(e.ValidityType!==t.validityType)throw(0,Ne.default)(new Error('Field "validityType" did not match between protobuf and CBOR'),sr);if(e.Sequence!==t.sequence)throw(0,Ne.default)(new Error('Field "sequence" did not match between protobuf and CBOR'),sr);if(e.TTL!==t.ttl)throw(0,Ne.default)(new Error('Field "ttl" did not match between protobuf and CBOR'),sr)};var fp=Mo("ipns"),hp=qe.code,Fs=60*60*1e9,Ml="/ipns/",dp=Ml.length,Ms={v1Compatible:!0,ttlNs:Fs};async function pp(t,e,r,n,o=Ms){let i=new Os.default(Date.now()+Number(n)),s=Le.ValidityType.EOL,a=BigInt(o.ttlNs??Fs);return Hl(t,e,r,s,i.toString(),a,o)}async function gp(t,e,r,n,o=Ms){let i=Os.default.fromString(n),s=Le.ValidityType.EOL,a=BigInt(o.ttlNs??Fs);return Hl(t,e,r,s,i.toString(),a,o)}var Hl=async(t,e,r,n,o,i,s=Ms)=>{r=BigInt(r);let a=Z(o),c=Vs(e),f=Z(c);if(t.privateKey==null)throw(0,Ds.default)(new Error("Missing private key"),mu);let u=await au(t.privateKey),l=Ol(f,n,a,r,i),h=_l(l),B=await u.sign(h),v;if(t.publicKey!=null){let p=zt(t.toBytes());(p.code!==hp||!be(t.publicKey,p.digest))&&(v=t.publicKey)}if(s.v1Compatible===!0){let p=await bp(u,f,n,a),d={value:c,signatureV1:p,validity:o,validityType:n,sequence:r,ttl:i,signatureV2:B,data:l};return v!=null&&(d.pubKey=v),d}else{let p={value:c,validity:o,validityType:n,sequence:r,ttl:i,signatureV2:B,data:l};return v!=null&&(p.pubKey=v),p}},yp=t=>yi.encode(t).slice(1),mp=t=>new Po(`/ipns/${yp(t)}`),bp=async(t,e,r,n)=>{try{let o=Nl(e,r,n);return await t.sign(o)}catch(o){throw fp.error("record signature creation failed",o),(0,Ds.default)(new Error("record signature creation failed"),du)}};return ef(wp);})();
/*! Bundled license information:

pvtsutils/build/index.js:
  (*!
   * MIT License
   * 
   * Copyright (c) 2017-2022 Peculiar Ventures, LLC
   * 
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   * 
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   * 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   * 
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

pvutils/build/utils.es.js:
  (*!
   Copyright (c) Peculiar Ventures, LLC
  *)

asn1js/build/index.es.js:
  (*!
   * Copyright (c) 2014, GMO GlobalSign
   * Copyright (c) 2015-2022, Peculiar Ventures
   * All rights reserved.
   * 
   * Author 2014-2019, Yury Strozhevsky
   * 
   * Redistribution and use in source and binary forms, with or without modification,
   * are permitted provided that the following conditions are met:
   * 
   * * Redistributions of source code must retain the above copyright notice, this
   *   list of conditions and the following disclaimer.
   * 
   * * Redistributions in binary form must reproduce the above copyright notice, this
   *   list of conditions and the following disclaimer in the documentation and/or
   *   other materials provided with the distribution.
   * 
   * * Neither the name of the copyright holder nor the names of its
   *   contributors may be used to endorse or promote products derived from
   *   this software without specific prior written permission.
   * 
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
   * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
   * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   * 
   *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return Ipns}));
